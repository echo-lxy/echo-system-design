<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>чммф╕Ашп╛я╝ЪщАПш┐З Netty чЬЛ IO цибхЮЛ | EchoDesign</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="ч│╗ч╗Яшо╛шобф╣ЛуАМшо▓шзг + щЭвшпХцМЗхНЧуАНя╝Мц░┤ц╗┤чЯ│чй┐я╝Мшо╛шобцЧащУ╢х╝╣я╝Б">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.c76c3453.css" as="style"><link rel="preload" href="/assets/js/app.59640afe.js" as="script"><link rel="preload" href="/assets/js/2.933750c6.js" as="script"><link rel="preload" href="/assets/js/51.ef213b56.js" as="script"><link rel="preload" href="/assets/js/7.7eb70372.js" as="script"><link rel="prefetch" href="/assets/js/10.2cc95be8.js"><link rel="prefetch" href="/assets/js/100.2b21dce5.js"><link rel="prefetch" href="/assets/js/101.96ca71f6.js"><link rel="prefetch" href="/assets/js/11.21625d3b.js"><link rel="prefetch" href="/assets/js/12.915fdd22.js"><link rel="prefetch" href="/assets/js/13.8ddd597e.js"><link rel="prefetch" href="/assets/js/14.1141ec27.js"><link rel="prefetch" href="/assets/js/15.d5a34c66.js"><link rel="prefetch" href="/assets/js/16.e52ba8b4.js"><link rel="prefetch" href="/assets/js/17.acb3bf3d.js"><link rel="prefetch" href="/assets/js/18.e491edb6.js"><link rel="prefetch" href="/assets/js/19.a22c1d8c.js"><link rel="prefetch" href="/assets/js/20.fe7d08c7.js"><link rel="prefetch" href="/assets/js/21.24c0f101.js"><link rel="prefetch" href="/assets/js/22.dd779f94.js"><link rel="prefetch" href="/assets/js/23.4d814163.js"><link rel="prefetch" href="/assets/js/24.891fe6fb.js"><link rel="prefetch" href="/assets/js/25.41dca26b.js"><link rel="prefetch" href="/assets/js/26.6337eac0.js"><link rel="prefetch" href="/assets/js/27.de80589e.js"><link rel="prefetch" href="/assets/js/28.6922a65b.js"><link rel="prefetch" href="/assets/js/29.7325b5ce.js"><link rel="prefetch" href="/assets/js/3.e62a71e4.js"><link rel="prefetch" href="/assets/js/30.e32f6b31.js"><link rel="prefetch" href="/assets/js/31.a532917f.js"><link rel="prefetch" href="/assets/js/32.13b70e91.js"><link rel="prefetch" href="/assets/js/33.d10d51bb.js"><link rel="prefetch" href="/assets/js/34.6671ead6.js"><link rel="prefetch" href="/assets/js/35.2760ed8d.js"><link rel="prefetch" href="/assets/js/36.5b9e5792.js"><link rel="prefetch" href="/assets/js/37.51145580.js"><link rel="prefetch" href="/assets/js/38.cddf1060.js"><link rel="prefetch" href="/assets/js/39.8a83e688.js"><link rel="prefetch" href="/assets/js/4.73518a0f.js"><link rel="prefetch" href="/assets/js/40.591baf2a.js"><link rel="prefetch" href="/assets/js/41.f961e422.js"><link rel="prefetch" href="/assets/js/42.b34f1599.js"><link rel="prefetch" href="/assets/js/43.5a509601.js"><link rel="prefetch" href="/assets/js/44.64fd3383.js"><link rel="prefetch" href="/assets/js/45.685623ac.js"><link rel="prefetch" href="/assets/js/46.7624d38c.js"><link rel="prefetch" href="/assets/js/47.5646b068.js"><link rel="prefetch" href="/assets/js/48.8de239a3.js"><link rel="prefetch" href="/assets/js/49.15d8e916.js"><link rel="prefetch" href="/assets/js/5.94727770.js"><link rel="prefetch" href="/assets/js/50.4fb0caa1.js"><link rel="prefetch" href="/assets/js/52.18c75eba.js"><link rel="prefetch" href="/assets/js/53.f76e624c.js"><link rel="prefetch" href="/assets/js/54.3098ec9f.js"><link rel="prefetch" href="/assets/js/55.0edcba5d.js"><link rel="prefetch" href="/assets/js/56.9df87e2e.js"><link rel="prefetch" href="/assets/js/57.be37bfce.js"><link rel="prefetch" href="/assets/js/58.ca1aa081.js"><link rel="prefetch" href="/assets/js/59.7b7e3faf.js"><link rel="prefetch" href="/assets/js/6.0b558b79.js"><link rel="prefetch" href="/assets/js/60.96815912.js"><link rel="prefetch" href="/assets/js/61.f48524d4.js"><link rel="prefetch" href="/assets/js/62.82fff0c9.js"><link rel="prefetch" href="/assets/js/63.41ff19e4.js"><link rel="prefetch" href="/assets/js/64.9b3def35.js"><link rel="prefetch" href="/assets/js/65.0b2ab47d.js"><link rel="prefetch" href="/assets/js/66.2ae7a107.js"><link rel="prefetch" href="/assets/js/67.196ec80b.js"><link rel="prefetch" href="/assets/js/68.cab1ea3b.js"><link rel="prefetch" href="/assets/js/69.5f61d937.js"><link rel="prefetch" href="/assets/js/70.7279b1df.js"><link rel="prefetch" href="/assets/js/71.4f744076.js"><link rel="prefetch" href="/assets/js/72.44c999da.js"><link rel="prefetch" href="/assets/js/73.526febf1.js"><link rel="prefetch" href="/assets/js/74.26f8d9a5.js"><link rel="prefetch" href="/assets/js/75.7c86d41a.js"><link rel="prefetch" href="/assets/js/76.15d5bea9.js"><link rel="prefetch" href="/assets/js/77.7b3f6980.js"><link rel="prefetch" href="/assets/js/78.31a353ef.js"><link rel="prefetch" href="/assets/js/79.173bbc8c.js"><link rel="prefetch" href="/assets/js/8.7a3679f1.js"><link rel="prefetch" href="/assets/js/80.78a31e84.js"><link rel="prefetch" href="/assets/js/81.8d6c43d2.js"><link rel="prefetch" href="/assets/js/82.3b90a7cc.js"><link rel="prefetch" href="/assets/js/83.f3a9ee0c.js"><link rel="prefetch" href="/assets/js/84.eeb423e8.js"><link rel="prefetch" href="/assets/js/85.4cd3a775.js"><link rel="prefetch" href="/assets/js/86.931cbb70.js"><link rel="prefetch" href="/assets/js/87.47ba635a.js"><link rel="prefetch" href="/assets/js/88.93192130.js"><link rel="prefetch" href="/assets/js/89.b5690031.js"><link rel="prefetch" href="/assets/js/9.36f81190.js"><link rel="prefetch" href="/assets/js/90.cdc8eb8f.js"><link rel="prefetch" href="/assets/js/91.87a85466.js"><link rel="prefetch" href="/assets/js/92.6b777d4b.js"><link rel="prefetch" href="/assets/js/93.f8975bc4.js"><link rel="prefetch" href="/assets/js/94.1eade7f0.js"><link rel="prefetch" href="/assets/js/95.96f5db04.js"><link rel="prefetch" href="/assets/js/96.fc68b295.js"><link rel="prefetch" href="/assets/js/97.0a9a6187.js"><link rel="prefetch" href="/assets/js/98.10f4b27a.js"><link rel="prefetch" href="/assets/js/99.4a895015.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c76c3453.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="чЫох╜Х" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="EchoDesign" class="logo"> <span class="site-name can-hide">EchoDesign</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">ЁЯПащжЦщб╡</a></div><div class="nav-item"><a href="/pages/fccd91/" class="nav-link">тЬТя╕ПчГнщЧичоЧц│Х</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ЁЯОЦя╕Пш╡ПцЮРч╗ПхЕ╕шо╛шоб" class="dropdown-title"><!----> <span class="title" style="display:;">ЁЯОЦя╕Пш╡ПцЮРч╗ПхЕ╕шо╛шоб</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/252196/" class="nav-link">Redis ч│╗ч╗Яшо╛шоб</a></li><li class="dropdown-item"><!----> <a href="/pages/b9733b/" class="nav-link">Kafka ч│╗ч╗Яшо╛шоб</a></li><li class="dropdown-item"><!----> <a href="/pages/bfab10/" class="nav-link">Netty ч│╗ч╗Яшо╛шоб</a></li><li class="dropdown-item"><!----> <a href="/pages/4601ca/" class="nav-link">Nginx ч│╗ч╗Яшо╛шоб</a></li></ul></div></div><div class="nav-item"><a href="/pages/84cb49/" class="nav-link">ЁЯзСтАНЁЯТ╗хоЮцИШч│╗ч╗Яшо╛шоб</a></div><div class="nav-item"><a href="/pages/92b2ee/" class="nav-link">тЭУщЧочнФ</a></div><div class="nav-item"><a href="/pages/52ebd8/" class="nav-link">ЁЯСАхКицАБ</a></div> <a href="https://github.com/echo-lxy/echo-system-design" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">ЁЯПащжЦщб╡</a></div><div class="nav-item"><a href="/pages/fccd91/" class="nav-link">тЬТя╕ПчГнщЧичоЧц│Х</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ЁЯОЦя╕Пш╡ПцЮРч╗ПхЕ╕шо╛шоб" class="dropdown-title"><!----> <span class="title" style="display:;">ЁЯОЦя╕Пш╡ПцЮРч╗ПхЕ╕шо╛шоб</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/252196/" class="nav-link">Redis ч│╗ч╗Яшо╛шоб</a></li><li class="dropdown-item"><!----> <a href="/pages/b9733b/" class="nav-link">Kafka ч│╗ч╗Яшо╛шоб</a></li><li class="dropdown-item"><!----> <a href="/pages/bfab10/" class="nav-link">Netty ч│╗ч╗Яшо╛шоб</a></li><li class="dropdown-item"><!----> <a href="/pages/4601ca/" class="nav-link">Nginx ч│╗ч╗Яшо╛шоб</a></li></ul></div></div><div class="nav-item"><a href="/pages/84cb49/" class="nav-link">ЁЯзСтАНЁЯТ╗хоЮцИШч│╗ч╗Яшо╛шоб</a></div><div class="nav-item"><a href="/pages/92b2ee/" class="nav-link">тЭУщЧочнФ</a></div><div class="nav-item"><a href="/pages/52ebd8/" class="nav-link">ЁЯСАхКицАБ</a></div> <a href="https://github.com/echo-lxy/echo-system-design" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ф╕АуАБхЙНшиА</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ф║МуАБхЯ║чбАчЯешпЖ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ф╕ЙуАБф╕╗ч║┐ф╗╗хКб</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>хЫЫуАБц╖▒хЕе Netty ца╕х┐Г</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/65674f/" aria-current="page" class="active sidebar-link">чммф╕Ашп╛я╝ЪщАПш┐З Netty чЬЛ IO цибхЮЛ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/65674f/#хЙНшиА" class="sidebar-link">хЙНшиА</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#ч╜Сч╗ЬхМЕцОецФ╢ц╡БчиЛ" class="sidebar-link">ч╜Сч╗ЬхМЕцОецФ╢ц╡БчиЛ</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#ч╜Сч╗ЬхМЕхПСщАБц╡БчиЛ" class="sidebar-link">ч╜Сч╗ЬхМЕхПСщАБц╡БчиЛ</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#хЖНш░И-щШ╗хбЮ-щЭЮщШ╗хбЮ-ф╕О-хРМцне-х╝Вцне" class="sidebar-link">хЖНш░И(щШ╗хбЮя╝МщЭЮщШ╗хбЮ)ф╕О(хРМцнея╝Мх╝Вцне)</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#ioцибхЮЛ" class="sidebar-link">IOцибхЮЛ</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#io-ч║┐чиЛцибхЮЛ" class="sidebar-link">IO ч║┐чиЛцибхЮЛ</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#nettyчЪДioцибхЮЛ" class="sidebar-link">NettyчЪДIOцибхЮЛ</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#цА╗ч╗У" class="sidebar-link">цА╗ч╗У</a></li><li class="sidebar-sub-header level2"><a href="/pages/65674f/#хПВшАГш╡ДцЦЩ" class="sidebar-link">хПВшАГш╡ДцЦЩ</a></li></ul></li><li><a href="/pages/440035/" class="sidebar-link">чммф║Мшп╛я╝ЪReactorхЬи Netty ф╕нчЪДхоЮчО░я╝ИхИЫх╗║чпЗя╝Й</a></li><li><a href="/pages/bb668a/" class="sidebar-link">чммф╕Йшп╛я╝ЪNetty ца╕х┐Гх╝ХцУО Reactor чЪДш┐Рш╜мцЮ╢цЮД</a></li><li><a href="/pages/be98dc/" class="sidebar-link">чммхЫЫшп╛я╝ЪNetty хжВф╜ХщлШцХИцОецФ╢ч╜Сч╗Ьш┐ЮцОе</a></li><li><a href="/pages/d711b1/" class="sidebar-link">чммф║Фшп╛я╝ЪNetty хжВф╜ХщлШцХИцОецФ╢ч╜Сч╗ЬцХ░цНо</a></li><li><a href="/pages/a73206/" class="sidebar-link">чммхЕншп╛я╝ЪNetty хжВф╜ХщлШцХИхПСщАБч╜Сч╗ЬцХ░цНо</a></li><li><a href="/pages/a1b0fe/" class="sidebar-link">чммф╕Гшп╛я╝ЪNetty ф╕нIOф║Лф╗╢чЪДшзжхПСцЧ╢цЬ║хТМф╝ацТнц╡БчиЛ</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ф║ФуАБц╖▒хЕе Netty хЖЕхнШчобчРЖ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="щжЦщб╡" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>Netty ч│╗ч╗Яшо╛шоб</span></li><li data-v-06225672><span data-v-06225672>хЫЫуАБц╖▒хЕе Netty ца╕х┐Г</span></li></ul> <div class="info" data-v-06225672><div title="ф╜ЬшАЕ" class="author iconfont icon-touxiang" data-v-06225672><a href="https://gitee.com/brother-one" target="_blank" title="ф╜ЬшАЕ" class="beLink" data-v-06225672>echo</a></div> <div title="хИЫх╗║цЧ╢щЧ┤" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-09-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">чЫох╜Х</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">чммф╕Ашп╛я╝ЪщАПш┐З Netty чЬЛ IO цибхЮЛ<!----></h1> <div class="page-slot page-slot-top">
    <div class="wwads-cn wwads-horizontal page-wwads" data-id="136"></div>
    <style>
      .page-wwads{
        width:100%!important;
        min-height: 0;
        margin: 0;
      }
      .page-wwads .wwads-img img{
        width:80px!important;
      }
      .page-wwads .wwads-poweredby{
        width: 40px;
        position: absolute;
        right: 25px;
        bottom: 3px;
      }
      .wwads-content .wwads-text, .page-wwads .wwads-text{
        height: 100%;
        padding-top: 5px;
        display: block;
      }
  </style>
  </div> <div class="theme-vdoing-content content__default"><h2 id="хЙНшиА"><a href="#хЙНшиА" class="header-anchor">#</a> хЙНшиА</h2> <p>ф╗Оф╗Кхдйх╝АхзЛцИСф╗мцЭешБКшБКNettyчЪДщВгф║Ыф║ЛхД┐я╝МцИСф╗мщГ╜чЯещБУNettyцШпф╕Аф╕кщлШцАзшГ╜х╝Вцнеф║Лф╗╢щй▒хКичЪДч╜Сч╗ЬцбЖцЮ╢уАВ</p> <p>хоГчЪДшо╛шобх╝Вх╕╕ф╝ШщЫЕчоАц┤Бя╝МцЙйх▒ХцАзщлШя╝Мчи│хоЪцАзх╝║уАВцЛецЬЙщЭЮх╕╕шпжч╗ЖхоМцХ┤чЪДчФицИ╖цЦЗцбгуАВ</p> <p>хРМцЧ╢хЖЕч╜оф║Жх╛ИхдЪщЭЮх╕╕цЬЙчФичЪДцибхЭЧхЯ║цЬмф╕КхБЪхИ░ф║Жх╝Ачо▒хН│чФия╝МчФицИ╖хПкщЬАшжБч╝ЦхЖЩчЯнчЯнхЗашбМф╗гчаБя╝Мх░▒хПпф╗ех┐лщАЯцЮДх╗║хЗ║ф╕Аф╕кхЕ╖цЬЙ<code>щлШхРЮхРР</code>я╝М<code>ф╜Ох╗╢цЧ╢</code>я╝М<code>цЫ┤х░СчЪДш╡Дц║Рц╢ИшАЧ</code>я╝М<code>щлШцАзшГ╜я╝ИщЭЮх┐ЕшжБчЪДхЖЕхнШцЛ╖ш┤ЭцЬАх░ПхМЦя╝Й</code>чнЙчЙ╣х╛БчЪДщлШх╣╢хПСч╜Сч╗Ьх║ФчФичиЛх║ПуАВ</p> <p>цЬмцЦЗцИСф╗мцЭецОвшоиф╕ЛцФпцМБNettyхЕ╖цЬЙ<code>щлШхРЮхРР</code>я╝М<code>ф╜Ох╗╢цЧ╢</code>чЙ╣х╛БчЪДхЯ║чЯ│----nettyчЪД<code>ч╜Сч╗ЬIOцибхЮЛ</code>уАВ</p> <p>чФ▒NettyчЪД<code>ч╜Сч╗ЬIOцибхЮЛ</code>х╝АхзЛя╝МцИСф╗мцЭецнгх╝ПцПнх╝АцЬмч│╗хИЧNettyц║РчаБшзгцЮРчЪДх║Пх╣Хя╝Ъ</p> <h2 id="ч╜Сч╗ЬхМЕцОецФ╢ц╡БчиЛ"><a href="#ч╜Сч╗ЬхМЕцОецФ╢ц╡БчиЛ" class="header-anchor">#</a> ч╜Сч╗ЬхМЕцОецФ╢ц╡БчиЛ</h2> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190852001.png" alt="image-20240919085201703"></p> <ul><li>х╜У<code>ч╜Сч╗ЬцХ░цНох╕з</code>щАЪш┐Зч╜Сч╗Ьф╝аш╛УхИ░ш╛╛ч╜СхНбцЧ╢я╝Мч╜СхНбф╝Ъх░Жч╜Сч╗ЬцХ░цНох╕зщАЪш┐З<code>DMAчЪДцЦ╣х╝П</code>цФ╛хИ░<code>чОпх╜вч╝УхЖ▓хМ║RingBuffer</code>ф╕н</li></ul> <div class="custom-block note"><p class="custom-block-title">чмФшо░</p> <p><code>RingBuffer</code>цШпч╜СхНбхЬихРпхКичЪДцЧ╢хАЩ<code>хИЖщЕНхТМхИЭхзЛхМЦ</code>чЪД<code>чОпх╜вч╝УхЖ▓щШЯхИЧ</code>уАВх╜У<code>RingBufferц╗б</code>чЪДцЧ╢хАЩя╝МцЦ░цЭечЪДцХ░цНохМЕх░▒ф╝Ъшвл<code>ф╕вх╝Г</code>уАВцИСф╗мхПпф╗ещАЪш┐З<code>ifconfig</code>хС╜ф╗дцЯечЬЛч╜СхНбцФ╢хПСцХ░цНохМЕчЪДцГЕхЖ╡уАВхЕ╢ф╕н<code>overruns</code>цХ░цНощб╣шбичд║х╜У<code>RingBufferц╗б</code>цЧ╢я╝Мшвл<code>ф╕вх╝ГчЪДцХ░цНохМЕ</code>уАВхжВцЮЬхПСчО░хЗ║чО░ф╕вхМЕцГЕхЖ╡я╝МхПпф╗ещАЪш┐З<code>ethtoolхС╜ф╗д</code>цЭехвЮхдзRingBufferщХ┐х║жуАВ</p></div> <ul><li>х╜У<code>DMAцУНф╜ЬхоМцИР</code>цЧ╢я╝Мч╜СхНбф╝ЪхРСCPUхПСш╡╖ф╕Аф╕к<code>чбмф╕нцЦн</code>я╝МхСКшпЙ<code>CPU</code>цЬЙч╜Сч╗ЬцХ░цНохИ░ш╛╛уАВCPUш░ГчФич╜СхНбщй▒хКиц│ихЖМчЪД<code>чбмф╕нцЦнхУНх║ФчиЛх║П</code>уАВч╜СхНбчбмф╕нцЦнхУНх║ФчиЛх║Пф╝Ъф╕║ч╜Сч╗ЬцХ░цНох╕зхИЫх╗║хЖЕца╕цХ░цНоч╗УцЮД<code>sk_buffer</code>я╝Мх╣╢х░Жч╜Сч╗ЬцХ░цНох╕з<code>цЛ╖ш┤Э</code>хИ░<code>sk_buffer</code>ф╕нуАВчД╢хРОхПСш╡╖<code>ш╜пф╕нцЦншп╖ц▒В</code>я╝МщАЪчЯе<code>хЖЕца╕</code>цЬЙцЦ░чЪДч╜Сч╗ЬцХ░цНох╕зхИ░ш╛╛уАВ</li></ul> <div class="custom-block note"><p class="custom-block-title">чмФшо░</p> <p><code>sk_buff</code>ч╝УхЖ▓хМ║я╝МцШпф╕Аф╕кч╗┤цКдч╜Сч╗Ьх╕зч╗УцЮДчЪД<code>хПМхРСщУ╛шби</code>я╝МщУ╛шбиф╕нчЪДцпПф╕Аф╕кхЕГч┤ащГ╜цШпф╕Аф╕к<code>ч╜Сч╗Ьх╕з</code>уАВшЩ╜чД╢ TCP/IP хНПшооцаИхИЖф║Жхе╜хЗах▒Вя╝Мф╜Жф╕Кф╕Лф╕НхРМх▒Вф╣ЛщЧ┤чЪДф╝ащАТя╝МхоЮщЩЕф╕КхПкщЬАшжБцУНф╜Ьш┐Щф╕кцХ░цНоч╗УцЮДф╕нчЪДцМЗщТИя╝МшАМ<code>цЧащЬАш┐ЫшбМцХ░цНохдНхИ╢</code>уАВ</p></div> <ul><li>хЖЕца╕ч║┐чиЛ<code>ksoftirqd</code>хПСчО░цЬЙш╜пф╕нцЦншп╖ц▒ВхИ░цЭея╝МщЪПхРОш░ГчФич╜СхНбщй▒хКиц│ихЖМчЪД<code>pollхЗ╜цХ░</code>я╝М<code>pollхЗ╜цХ░</code>х░Ж<code>sk_buffer</code>ф╕нчЪД<code>ч╜Сч╗ЬцХ░цНохМЕ</code>щАБхИ░хЖЕца╕хНПшооцаИф╕нц│ихЖМчЪД<code>ip_rcvхЗ╜цХ░</code>ф╕нуАВ</li></ul> <div class="custom-block note"><p class="custom-block-title">чмФшо░</p> <p><code>цпПф╕кCPU</code>ф╝Ъч╗СхоЪ<code>ф╕Аф╕кksoftirqd</code>хЖЕца╕ч║┐чиЛ<code>ф╕УщЧи</code>чФицЭехдДчРЖ<code>ш╜пф╕нцЦнхУНх║Ф</code>уАВ2ф╕к CPU цЧ╢я╝Мх░▒ф╝ЪцЬЙ <code>ksoftirqd/0</code> хТМ <code>ksoftirqd/1</code>ш┐Щф╕дф╕кхЖЕца╕ч║┐чиЛуАВ</p></div> <div class="custom-block note"><p class="custom-block-title">чмФшо░</p> <p><strong>ш┐ЩщЗМцЬЙф╕кф║ЛцГЕщЬАшжБц│ицДПф╕Ля╝Ъ</strong> ч╜СхНбцОецФ╢хИ░цХ░цНохРОя╝Мх╜У<code>DMAцЛ╖ш┤ЭхоМцИР</code>цЧ╢я╝МхРСCPUхПСхЗ║<code>чбмф╕нцЦн</code>я╝Мш┐ЩцЧ╢<code>хУкф╕кCPU</code>ф╕КхУНх║Фф║Жш┐Щф╕к<code>чбмф╕нцЦн</code>я╝МщВгф╣ИхЬич╜СхНб<code>чбмф╕нцЦнхУНх║ФчиЛх║П</code>ф╕нхПСхЗ║чЪД<code>ш╜пф╕нцЦншп╖ц▒В</code>ф╣Яф╝ЪхЬи<code>ш┐Щф╕кCPUч╗СхоЪчЪДksoftirqdч║┐чиЛ</code>ф╕нхУНх║ФуАВцЙАф╗ехжВцЮЬхПСчО░Linuxш╜пф╕нцЦня╝МCPUц╢ИшАЧщГ╜<code>щЫЖф╕нхЬиф╕Аф╕кца╕ф╕К</code>чЪДшпЭя╝МщВгф╣Их░▒щЬАшжБш░ГцХ┤чбмф╕нцЦнчЪД<code>CPUф║▓хТМцАз</code>я╝МцЭех░Жчбмф╕нцЦн<code>цЙУцХг</code>хИ░<code>ф╕НщАЪчЪДCPUца╕</code>ф╕КхО╗уАВ</p></div> <ul><li>хЬи<code>ip_rcvхЗ╜цХ░</code>ф╕нф╣Ях░▒цШпф╕КхЫ╛ф╕нчЪД<code>ч╜Сч╗Ьх▒В</code>я╝М<code>хПЦхЗ║</code>цХ░цНохМЕчЪД<code>IPхд┤</code>я╝МхИдцЦншпецХ░цНохМЕф╕Лф╕Аш╖│чЪДш╡░хРСя╝МхжВцЮЬцХ░цНохМЕцШпхПСщАБч╗ЩцЬмцЬ║чЪДя╝МхИЩхПЦхЗ║ф╝аш╛Ух▒ВчЪДхНПшооч▒╗хЮЛя╝И<code>TCP</code>цИЦшАЕ<code>UDP</code>)я╝Мх╣╢<code>хО╗цОЙ</code>цХ░цНохМЕчЪД<code>IPхд┤</code>я╝Мх░ЖцХ░цНохМЕф║дч╗Щф╕КхЫ╛ф╕нх╛Ч<code>ф╝аш╛Ух▒В</code>хдДчРЖуАВ</li></ul> <div class="custom-block note"><p class="custom-block-title">чмФшо░</p> <p>ф╝аш╛Ух▒ВчЪДхдДчРЖхЗ╜цХ░я╝Ъ<code>TCPхНПшоо</code>хп╣х║ФхЖЕца╕хНПшооцаИф╕нц│ихЖМчЪД<code>tcp_rcvхЗ╜цХ░</code>я╝М<code>UDPхНПшоо</code>хп╣х║ФхЖЕца╕хНПшооцаИф╕нц│ихЖМчЪД<code>udp_rcvхЗ╜цХ░</code>уАВ</p></div> <ul><li>х╜УцИСф╗мщЗЗчФичЪДцШп<code>TCPхНПшоо</code>цЧ╢я╝МцХ░цНохМЕхИ░ш╛╛ф╝аш╛Ух▒ВцЧ╢я╝Мф╝ЪхЬихЖЕца╕хНПшооцаИф╕нчЪД<code>tcp_rcvхЗ╜цХ░</code>хдДчРЖя╝МхЬиtcp_rcvхЗ╜цХ░ф╕н<code>хО╗цОЙ</code>TCPхд┤я╝Мца╣цНо<code>хЫЫхЕГч╗Дя╝Иц║РIPя╝Мц║РчлпхПгя╝МчЫочЪДIPя╝МчЫочЪДчлпхПгя╝Й</code>цЯецЙ╛<code>хп╣х║ФчЪДSocket</code>я╝МхжВцЮЬцЙ╛хИ░хп╣х║ФчЪДSocketхИЩх░Жч╜Сч╗ЬцХ░цНохМЕф╕нчЪДф╝аш╛УцХ░цНоцЛ╖ш┤ЭхИ░<code>Socket</code>ф╕нчЪД<code>цОецФ╢ч╝УхЖ▓хМ║</code>ф╕нуАВхжВцЮЬц▓бцЬЙцЙ╛хИ░я╝МхИЩхПСщАБф╕Аф╕к<code>чЫоцаЗф╕НхПпш╛╛</code>чЪД<code>icmp</code>хМЕуАВ</li></ul> <p>хЖЕца╕хЬицОецФ╢ч╜Сч╗ЬцХ░цНохМЕцЧ╢цЙАхБЪчЪДх╖еф╜ЬцИСф╗мх░▒ф╗Лч╗НхоМф║Жя╝МчО░хЬицИСф╗мцККшзЖшзТцФ╛хИ░х║ФчФих▒Вя╝Мх╜УцИСф╗мчиЛх║ПщАЪш┐Зч│╗ч╗Яш░ГчФи<code>read</code>шп╗хПЦ<code>SocketцОецФ╢ч╝УхЖ▓хМ║</code>ф╕нчЪДцХ░цНоцЧ╢я╝МхжВцЮЬцОецФ╢ч╝УхЖ▓хМ║ф╕н<code>ц▓бцЬЙцХ░цНо</code>я╝МщВгф╣Их║ФчФичиЛх║Пх░▒ф╝ЪхЬич│╗ч╗Яш░ГчФиф╕К<code>щШ╗хбЮ</code>я╝МчЫ┤хИ░SocketцОецФ╢ч╝УхЖ▓хМ║<code>цЬЙцХ░цНо</code>я╝МчД╢хРО<code>CPU</code>х░Ж<code>хЖЕца╕чй║щЧ┤</code>я╝ИSocketцОецФ╢ч╝УхЖ▓хМ║я╝ЙчЪДцХ░цНо<code>цЛ╖ш┤Э</code>хИ░<code>чФицИ╖чй║щЧ┤</code>я╝МцЬАхРОч│╗ч╗Яш░ГчФи<code>readш┐ФхЫЮ</code>я╝Мх║ФчФичиЛх║П<code>шп╗хПЦ</code>цХ░цНо</p> <h3 id="цАзшГ╜х╝АщФА"><a href="#цАзшГ╜х╝АщФА" class="header-anchor">#</a> цАзшГ╜х╝АщФА</h3> <p>ф╗ОхЖЕца╕хдДчРЖч╜Сч╗ЬцХ░цНохМЕцОецФ╢чЪДцХ┤ф╕кш┐ЗчиЛцЭечЬЛя╝МхЖЕца╕х╕оцИСф╗мхБЪф║ЖщЭЮх╕╕ф╣ЛхдЪчЪДх╖еф╜Ья╝МцЬАч╗ИцИСф╗мчЪДх║ФчФичиЛх║ПцЙНшГ╜шп╗хПЦхИ░ч╜Сч╗ЬцХ░цНоуАВ</p> <p>щЪПчЭАшАМцЭечЪДф╣Ях╕жцЭеф║Жх╛ИхдЪчЪДцАзшГ╜х╝АщФАя╝Мч╗УхРИхЙНщЭвф╗Лч╗НчЪДч╜Сч╗ЬцХ░цНохМЕцОецФ╢ш┐ЗчиЛцИСф╗мцЭечЬЛф╕Лч╜Сч╗ЬцХ░цНохМЕцОецФ╢чЪДш┐ЗчиЛф╕нщГ╜цЬЙхУкф║ЫцАзшГ╜х╝АщФАя╝Ъ</p> <ul><li>х║ФчФичиЛх║ПщАЪш┐З<code>ч│╗ч╗Яш░ГчФи</code>ф╗О<code>чФицИ╖цАБ</code>ш╜мф╕║<code>хЖЕца╕цАБ</code>чЪДх╝АщФАф╗ехПКч│╗ч╗Яш░ГчФи<code>ш┐ФхЫЮ</code>цЧ╢ф╗О<code>хЖЕца╕цАБ</code>ш╜мф╕║<code>чФицИ╖цАБ</code>чЪДх╝АщФАуАВ</li> <li>ч╜Сч╗ЬцХ░цНоф╗О<code>хЖЕца╕чй║щЧ┤</code>щАЪш┐З<code>CPUцЛ╖ш┤Э</code>хИ░<code>чФицИ╖чй║щЧ┤</code>чЪДх╝АщФАуАВ</li> <li>хЖЕца╕ч║┐чиЛ<code>ksoftirqd</code>хУНх║Ф<code>ш╜пф╕нцЦн</code>чЪДх╝АщФАуАВ</li> <li><code>CPU</code>хУНх║Ф<code>чбмф╕нцЦн</code>чЪДх╝АщФАуАВ</li> <li><code>DMAцЛ╖ш┤Э</code>ч╜Сч╗ЬцХ░цНохМЕхИ░<code>хЖЕхнШ</code>ф╕нчЪДх╝АщФАуАВ</li></ul> <h2 id="ч╜Сч╗ЬхМЕхПСщАБц╡БчиЛ"><a href="#ч╜Сч╗ЬхМЕхПСщАБц╡БчиЛ" class="header-anchor">#</a> ч╜Сч╗ЬхМЕхПСщАБц╡БчиЛ</h2> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190856740.png" alt="хЫ╛чЙЗ"></p> <ul><li>х╜УцИСф╗мхЬих║ФчФичиЛх║Пф╕нш░ГчФи<code>send</code>ч│╗ч╗Яш░ГчФихПСщАБцХ░цНоцЧ╢я╝МчФ▒ф║ОцШпч│╗ч╗Яш░ГчФицЙАф╗еч║┐чиЛф╝ЪхПСчФЯф╕АцмбчФицИ╖цАБхИ░хЖЕца╕цАБчЪДш╜мцНвя╝МхЬихЖЕца╕ф╕нщжЦхЕИца╣цНо<code>fd</code>х░ЖчЬЯцнгчЪДSocketцЙ╛хЗ║я╝Мш┐Щф╕кSocketхп╣ш▒бф╕ншо░х╜ХчЭАхРДчзНхНПшооцаИчЪДхЗ╜цХ░хЬ░хЭАя╝МчД╢хРОцЮДщАа<code>struct msghdr</code>хп╣ш▒бя╝Мх░ЖчФицИ╖щЬАшжБхПСщАБчЪДцХ░цНохЕищГих░БшгЕхЬиш┐Щф╕к<code>struct msghdr</code>ч╗УцЮДф╜Уф╕нуАВ</li> <li>ш░ГчФихЖЕца╕хНПшооцаИхЗ╜цХ░<code>inet_sendmsg</code>я╝МхПСщАБц╡БчиЛш┐ЫхЕехЖЕца╕хНПшооцаИхдДчРЖуАВхЬиш┐ЫхЕехИ░хЖЕца╕хНПшооцаИф╣ЛхРОя╝МхЖЕца╕ф╝ЪцЙ╛хИ░Socketф╕КчЪДхЕ╖ф╜УхНПшоочЪДхПСщАБхЗ╜цХ░уАВ</li></ul> <blockquote><p>цпФхжВя╝ЪцИСф╗мф╜┐чФичЪДцШп<code>TCPхНПшоо</code>я╝Мхп╣х║ФчЪД<code>TCPхНПшоо</code>хПСщАБхЗ╜цХ░цШп<code>tcp_sendmsg</code>я╝МхжВцЮЬцШп<code>UDPхНПшоо</code>чЪДшпЭя╝Мхп╣х║ФчЪДхПСщАБхЗ╜цХ░ф╕║<code>udp_sendmsg</code>уАВ</p></blockquote> <ul><li>хЬи<code>TCPхНПшоо</code>чЪДхПСщАБхЗ╜цХ░<code>tcp_sendmsg</code>ф╕ня╝МхИЫх╗║хЖЕца╕цХ░цНоч╗УцЮД<code>sk_buffer</code>,х░Ж<code>struct msghdr</code>ч╗УцЮДф╜Уф╕нчЪДхПСщАБцХ░цНо<code>цЛ╖ш┤Э</code>хИ░<code>sk_buffer</code>ф╕нуАВш░ГчФи<code>tcp_write_queue_tail</code>хЗ╜цХ░шО╖хПЦ<code>Socket</code>хПСщАБщШЯхИЧф╕нчЪДщШЯх░╛хЕГч┤ая╝Мх░ЖцЦ░хИЫх╗║чЪД<code>sk_buffer</code>ц╖╗хКахИ░<code>Socket</code>хПСщАБщШЯхИЧчЪДх░╛щГиуАВ</li></ul> <blockquote><p><code>Socket</code>чЪДхПСщАБщШЯхИЧцШпчФ▒<code>sk_buffer</code>ч╗ДцИРчЪДф╕Аф╕к<code>хПМхРСщУ╛шби</code>уАВ</p></blockquote> <blockquote><p>хПСщАБц╡БчиЛш╡░хИ░ш┐ЩщЗМя╝МчФицИ╖шжБхПСщАБчЪДцХ░цНоцА╗чоЧцШпф╗О<code>чФицИ╖чй║щЧ┤</code>цЛ╖ш┤ЭхИ░ф║Ж<code>хЖЕца╕</code>ф╕ня╝Мш┐ЩцЧ╢шЩ╜чД╢хПСщАБцХ░цНох╖▓ч╗П<code>цЛ╖ш┤Э</code>хИ░ф║ЖхЖЕца╕<code>Socket</code>ф╕нчЪД<code>хПСщАБщШЯхИЧ</code>ф╕ня╝Мф╜Жх╣╢ф╕Нф╗гшбихЖЕца╕ф╝Ъх╝АхзЛхПСщАБя╝МхЫаф╕║<code>TCPхНПшоо</code>чЪД<code>ц╡БщЗПцОзхИ╢</code>хТМ<code>цЛехбЮцОзхИ╢</code>я╝МчФицИ╖шжБхПСщАБчЪДцХ░цНохМЕ<code>х╣╢ф╕Нф╕АхоЪ</code>ф╝ЪчлЛщймшвлхПСщАБхЗ║хО╗я╝МщЬАшжБчмжхРИ<code>TCPхНПшоо</code>чЪДхПСщАБцЭбф╗╢уАВхжВцЮЬ<code>ц▓бцЬЙш╛╛хИ░хПСщАБцЭбф╗╢</code>я╝МщВгф╣ИцЬмцмб<code>send</code>ч│╗ч╗Яш░ГчФих░▒ф╝ЪчЫ┤цОеш┐ФхЫЮуАВ</p></blockquote> <ul><li>хжВцЮЬчмжхРИхПСщАБцЭбф╗╢я╝МхИЩх╝АхзЛш░ГчФи<code>tcp_write_xmit</code>хЖЕца╕хЗ╜цХ░уАВхЬиш┐Щф╕кхЗ╜цХ░ф╕ня╝Мф╝Ъх╛кчОпшО╖хПЦ<code>Socket</code>хПСщАБщШЯхИЧф╕нх╛ЕхПСщАБчЪД<code>sk_buffer</code>я╝МчД╢хРОш┐ЫшбМ<code>цЛехбЮцОзхИ╢</code>ф╗ехПК<code>ц╗СхКичкЧхПгчЪДчобчРЖ</code>уАВ</li> <li>х░Жф╗О<code>Socket</code>хПСщАБщШЯхИЧф╕ншО╖хПЦхИ░чЪД<code>sk_buffer</code>щЗНцЦ░<code>цЛ╖ш┤Эф╕Аф╗╜</code>я╝Мшо╛ч╜о<code>sk_bufferхЙпцЬм</code>ф╕нчЪД<code>TCP HEADER</code>уАВ</li></ul> <blockquote><p><code>sk_buffer</code> хЖЕщГихЕ╢хоЮхМЕхРлф║Жч╜Сч╗ЬхНПшооф╕нцЙАцЬЙчЪД <code>header</code>уАВхЬишо╛ч╜о <code>TCP HEADER</code>чЪДцЧ╢хАЩя╝МхПкцШпцККцМЗщТИцМЗхРС <code>sk_buffer</code>чЪДхРИщАВф╜Нч╜оуАВхРОщЭвхЖНшо╛ч╜о <code>IP HEADER</code>чЪДцЧ╢хАЩя╝МхЬицККцМЗщТИчз╗хКиф╕Аф╕Лх░▒шбМя╝МщБ┐хЕНщвСч╣БчЪДхЖЕхнШчФ│шп╖хТМцЛ╖ш┤Эя╝МцХИчОЗх╛ИщлШуАВ</p></blockquote> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190856347.png" alt="хЫ╛чЙЗ"></p> <blockquote><p>**ф╕║ф╗Аф╣Иф╕НчЫ┤цОеф╜┐чФи<code>Socket</code>хПСщАБщШЯхИЧф╕нчЪД<code>sk_buffer</code>шАМцШпщЬАшжБцЛ╖ш┤Эф╕Аф╗╜хСвя╝Я**хЫаф╕║<code>TCPхНПшоо</code>цШпцФпцМБ<code>ф╕вхМЕщЗНф╝а</code>чЪДя╝МхЬиц▓бцЬЙцФ╢хИ░хп╣члпчЪД<code>ACK</code>ф╣ЛхЙНя╝Мш┐Щф╕к<code>sk_buffer</code>цШпф╕НшГ╜хИащЩдчЪДуАВхЖЕца╕цпПцмбш░ГчФич╜СхНбхПСщАБцХ░цНочЪДцЧ╢хАЩя╝МхоЮщЩЕф╕Кф╝ащАТчЪДцШп<code>sk_buffer</code>чЪД<code>цЛ╖ш┤ЭхЙпцЬм</code>я╝Мх╜Уч╜СхНбцККцХ░цНохПСщАБхЗ║хО╗хРОя╝М<code>sk_buffer</code>цЛ╖ш┤ЭхЙпцЬмф╝ЪшвлщЗКцФ╛уАВх╜УцФ╢хИ░хп╣члпчЪД<code>ACK</code>ф╣ЛхРОя╝М<code>Socket</code>хПСщАБщШЯхИЧф╕нчЪД<code>sk_buffer</code>цЙНф╝ЪшвлчЬЯцнгхИащЩдуАВ</p></blockquote> <ul><li><p>х╜Ушо╛ч╜охоМ<code>TCPхд┤</code>хРОя╝МхЖЕца╕хНПшооцаИ<code>ф╝аш╛Ух▒В</code>чЪДф║ЛцГЕх░▒хБЪхоМф║Жя╝Мф╕ЛщЭвщАЪш┐Зш░ГчФи<code>ip_queue_xmit</code>хЖЕца╕хЗ╜цХ░я╝Мцнгх╝ПцЭехИ░хЖЕца╕хНПшооцаИ<code>ч╜Сч╗Ьх▒В</code>чЪДхдДчРЖуАВ</p> <blockquote><p>щАЪш┐З<code>route</code>хС╜ф╗дхПпф╗ецЯечЬЛцЬмцЬ║ш╖пчФ▒щЕНч╜оуАВ</p></blockquote> <blockquote><p>хжВцЮЬф╜аф╜┐чФи <code>iptables</code>щЕНч╜оф║Жф╕Аф║ЫшзДхИЩя╝МщВгф╣Иш┐ЩщЗМх░ЖцгАц╡Л<code>цШпхРжхС╜ф╕н</code>шзДхИЩуАВхжВцЮЬф╜ашо╛ч╜оф║ЖщЭЮх╕╕<code>хдНцЭВчЪД netfilter шзДхИЩ</code>я╝МхЬиш┐Щф╕кхЗ╜цХ░щЗМх░Жф╝Ъхп╝шЗ┤ф╜ачЪДч║┐чиЛ <code>CPU х╝АщФА</code>ф╝Ъ<code>цЮБхдзхвЮхКа</code>уАВ</p></blockquote></li> <li><ul><li>х░Ж<code>sk_buffer</code>ф╕нчЪДцМЗщТИчз╗хКихИ░<code>IPхд┤</code>ф╜Нч╜оф╕Кя╝Мшо╛ч╜о<code>IPхд┤</code>уАВ</li> <li>цЙзшбМ<code>netfilters</code>ш┐Зц╗дуАВш┐Зц╗дщАЪш┐Зф╣ЛхРОя╝МхжВцЮЬцХ░цНохдзф║О <code>MTU</code>чЪДшпЭя╝МхИЩцЙзшбМхИЖчЙЗуАВ</li> <li>цгАцЯе<code>Socket</code>ф╕нцШпхРжцЬЙч╝УхнШш╖пчФ▒шбия╝МхжВцЮЬц▓бцЬЙчЪДшпЭя╝МхИЩцЯецЙ╛ш╖пчФ▒щб╣я╝Мх╣╢ч╝УхнШхИ░<code>Socket</code>ф╕нуАВцОечЭАхЬицККш╖пчФ▒шбишо╛ч╜охИ░<code>sk_buffer</code>ф╕нуАВ</li></ul></li> <li><p>хЖЕца╕хНПшооцаИ<code>ч╜Сч╗Ьх▒В</code>чЪДф║ЛцГЕхдДчРЖхоМхРОя╝МчО░хЬихПСщАБц╡БчиЛш┐ЫхЕеф║ЖхИ░ф║Ж<code>щВ╗х▒ЕхнРч│╗ч╗Я</code>я╝М<code>щВ╗х▒ЕхнРч│╗ч╗Я</code>ф╜Нф║ОхЖЕца╕хНПшооцаИф╕нчЪД<code>ч╜Сч╗Ьх▒В</code>хТМ<code>ч╜Сч╗ЬцОехПгх▒В</code>ф╣ЛщЧ┤я╝МчФиф║ОхПСщАБ<code>ARPшп╖ц▒В</code>шО╖хПЦ<code>MACхЬ░хЭА</code>я╝МчД╢хРОх░Ж<code>sk_buffer</code>ф╕нчЪДцМЗщТИчз╗хКихИ░<code>MACхд┤</code>ф╜Нч╜оя╝МхблхЕЕ<code>MACхд┤</code>уАВ</p></li> <li><p>ч╗Пш┐З<code>щВ╗х▒ЕхнРч│╗ч╗Я</code>чЪДхдДчРЖя╝МчО░хЬи<code>sk_buffer</code>ф╕нх╖▓ч╗Пх░БшгЕф║Жф╕Аф╕кхоМцХ┤чЪД<code>цХ░цНох╕з</code>я╝МщЪПхРОхЖЕца╕х░Ж<code>sk_buffer</code>ф║дч╗Щ<code>ч╜Сч╗Ьшо╛хдЗхнРч│╗ч╗Я</code>ш┐ЫшбМхдДчРЖуАВ<code>ч╜Сч╗Ьшо╛хдЗхнРч│╗ч╗Я</code>ф╕╗шжБхБЪф╗еф╕ЛхЗащб╣ф║ЛцГЕя╝Ъ</p></li> <li><ul><li>щАЙцЛйхПСщАБщШЯхИЧя╝И<code>RingBuffer</code>я╝ЙуАВхЫаф╕║ч╜СхНбцЛецЬЙхдЪф╕кхПСщАБщШЯхИЧя╝МцЙАф╗ехЬихПСщАБхЙНщЬАшжБщАЙцЛйф╕Аф╕кхПСщАБщШЯхИЧуАВ</li> <li>х░Ж<code>sk_buffer</code>ц╖╗хКахИ░хПСщАБщШЯхИЧф╕нуАВ</li> <li>х╛кчОпф╗ОхПСщАБщШЯхИЧя╝И<code>RingBuffer</code>я╝Йф╕нхПЦхЗ║<code>sk_buffer</code>я╝Мш░ГчФихЖЕца╕хЗ╜цХ░<code>sch_direct_xmit</code>хПСщАБцХ░цНоя╝МхЕ╢ф╕нф╝Ъш░ГчФи<code>ч╜СхНбщй▒хКичиЛх║П</code>цЭехПСщАБцХ░цНоуАВ</li></ul></li></ul> <blockquote><p>ф╗еф╕Кш┐ЗчиЛхЕищГицШпчФицИ╖ч║┐чиЛчЪДхЖЕца╕цАБхЬицЙзшбМя╝МхНачФичЪДCPUцЧ╢щЧ┤цШпч│╗ч╗ЯцАБцЧ╢щЧ┤(<code>sy</code>)я╝Мх╜УхИЖщЕНч╗ЩчФицИ╖ч║┐чиЛчЪД<code>CPU quota</code>чФихоМчЪДцЧ╢хАЩя╝Мф╝ЪшзжхПС<code>NET_TX_SOFTIRQ</code>ч▒╗хЮЛчЪДш╜пф╕нцЦня╝МхЖЕца╕ч║┐чиЛ<code>ksoftirqd</code>ф╝ЪхУНх║Фш┐Щф╕кш╜пф╕нцЦня╝Мх╣╢цЙзшбМ<code>NET_TX_SOFTIRQ</code>ч▒╗хЮЛчЪДш╜пф╕нцЦнц│ихЖМчЪДхЫЮш░ГхЗ╜цХ░<code>net_tx_action</code>я╝МхЬихЫЮш░ГхЗ╜цХ░ф╕нф╝ЪцЙзшбМхИ░щй▒хКичиЛх║ПхЗ╜цХ░ <code>dev_hard_start_xmit</code>цЭехПСщАБцХ░цНоуАВ</p></blockquote> <blockquote><p><strong>ц│ицДПя╝Ъх╜УшзжхПС<code>NET_TX_SOFTIRQ</code>ш╜пф╕нцЦнцЭехПСщАБцХ░цНоцЧ╢я╝МхРОш╛╣ц╢ИшАЧчЪД CPU х░▒щГ╜цШ╛чд║хЬи <code>si</code>ш┐ЩщЗМф║Жя╝Мф╕Нф╝Ъц╢ИшАЧчФицИ╖ш┐ЫчиЛчЪДч│╗ч╗ЯцАБцЧ╢щЧ┤я╝И<code>sy</code>я╝Йф║ЖуАВ</strong></p></blockquote> <blockquote><p>ф╗Ош┐ЩщЗМхПпф╗ечЬЛхИ░ч╜Сч╗ЬхМЕчЪДхПСщАБш┐ЗчиЛхТМцОехПЧш┐ЗчиЛцШпф╕НхРМчЪДя╝МхЬиф╗Лч╗Нч╜Сч╗ЬхМЕчЪДцОехПЧш┐ЗчиЛцЧ╢я╝МцИСф╗мцПРхИ░цШпщАЪш┐ЗшзжхПС<code>NET_RX_SOFTIRQ</code>ч▒╗хЮЛчЪДш╜пф╕нцЦнхЬихЖЕца╕ч║┐чиЛ<code>ksoftirqd</code>ф╕нцЙзшбМ<code>хЖЕца╕ч╜Сч╗ЬхНПшооцаИ</code>цОехПЧцХ░цНоуАВшАМхЬич╜Сч╗ЬцХ░цНохМЕчЪДхПСщАБш┐ЗчиЛф╕нцШп<code>чФицИ╖ч║┐чиЛчЪДхЖЕца╕цАБ</code>хЬицЙзшбМ<code>хЖЕца╕ч╜Сч╗ЬхНПшооцаИ</code>я╝МхПкцЬЙх╜Уч║┐чиЛчЪД<code>CPU quota</code>чФих░╜цЧ╢я╝МцЙНшзжхПС<code>NET_TX_SOFTIRQ</code>ш╜пф╕нцЦнцЭехПСщАБцХ░цНоуАВ</p></blockquote> <blockquote><p>хЬицХ┤ф╕кч╜Сч╗ЬхМЕчЪДхПСщАБхТМцОехПЧш┐ЗчиЛф╕ня╝М<code>NET_TX_SOFTIRQ</code>ч▒╗хЮЛчЪДш╜пф╕нцЦнхПкф╝ЪхЬихПСщАБч╜Сч╗ЬхМЕцЧ╢х╣╢ф╕Фх╜УчФицИ╖ч║┐чиЛчЪД<code>CPU quota</code>чФих░╜цЧ╢я╝МцЙНф╝ЪшзжхПСуАВхЙйф╕ЛчЪДцОехПЧш┐ЗчиЛф╕ншзжхПСчЪДш╜пф╕нцЦнч▒╗хЮЛф╗ехПКхПСщАБхоМцХ░цНошзжхПСчЪДш╜пф╕нцЦнч▒╗хЮЛхЭЗф╕║<code>NET_RX_SOFTIRQ</code>уАВцЙАф╗еш┐Щх░▒цШпф╜ахЬицЬНхКбхЩиф╕КцЯечЬЛ <code>/proc/softirqs</code>я╝Мф╕АшИм <code>NET_RX</code>щГ╜шжБцпФ <code>NET_TX</code>хдзх╛ИхдЪчЪДчЪДхОЯхЫа</p></blockquote> <ul><li>чО░хЬихПСщАБц╡БчиЛч╗Иф║ОхИ░ф║Жч╜СхНбчЬЯхоЮхПСщАБцХ░цНочЪДщШ╢цо╡я╝МхЙНш╛╣цИСф╗мшо▓хИ░цЧашо║цШпчФицИ╖ч║┐чиЛчЪДхЖЕца╕цАБш┐ШцШпшзжхПС<code>NET_TX_SOFTIRQ</code>ч▒╗хЮЛчЪДш╜пф╕нцЦнхЬихПСщАБцХ░цНочЪДцЧ╢хАЩцЬАч╗Иф╝Ъш░ГчФихИ░ч╜СхНбчЪДщй▒хКичиЛх║ПхЗ╜цХ░<code>dev_hard_start_xmit</code>цЭехПСщАБцХ░цНоуАВхЬич╜СхНбщй▒хКичиЛх║ПхЗ╜цХ░<code>dev_hard_start_xmit</code>ф╕нф╝Ъх░Ж<code>sk_buffer</code>цШах░ДхИ░ч╜СхНбхПпшо┐щЧочЪД<code>хЖЕхнШ DMA хМ║хЯЯ</code>я╝МцЬАч╗Ич╜СхНбщй▒хКичиЛх║ПщАЪш┐З<code>DMA</code>чЪДцЦ╣х╝Пх░Ж<code>цХ░цНох╕з</code>щАЪш┐ЗчЙйчРЖч╜СхНбхПСщАБхЗ║хО╗уАВ</li> <li>х╜УцХ░цНохПСщАБхоМцпХхРОя╝Мш┐ШцЬЙцЬАхРОф╕Ащб╣щЗНшжБчЪДх╖еф╜Ья╝Мх░▒цШпц╕ЕчРЖх╖еф╜ЬуАВцХ░цНохПСщАБхоМцпХхРОя╝Мч╜СхНбшо╛хдЗф╝ЪхРС<code>CPU</code>хПСщАБф╕Аф╕кчбмф╕нцЦня╝М<code>CPU</code>ш░ГчФич╜СхНбщй▒хКичиЛх║Пц│ихЖМчЪД<code>чбмф╕нцЦнхУНх║ФчиЛх║П</code>я╝МхЬичбмф╕нцЦнхУНх║Фф╕ншзжхПС<code>NET_RX_SOFTIRQ</code>ч▒╗хЮЛчЪДш╜пф╕нцЦня╝МхЬиш╜пф╕нцЦнчЪДхЫЮш░ГхЗ╜цХ░<code>igb_poll</code>ф╕нц╕ЕчРЖщЗКцФ╛ <code>sk_buffer</code>я╝Мц╕ЕчРЖ<code>ч╜СхНб</code>хПСщАБщШЯхИЧя╝И<code>RingBuffer</code>я╝Йя╝МшзгщЩд DMA цШах░ДуАВ</li></ul> <blockquote><p>цЧашо║<code>чбмф╕нцЦн</code>цШпхЫаф╕║<code>цЬЙцХ░цНошжБцОецФ╢</code>я╝Мш┐ШцШпшп┤<code>хПСщАБхоМцИРщАЪчЯе</code>я╝Мф╗Очбмф╕нцЦншзжхПСчЪДш╜пф╕нцЦнщГ╜цШп <code>NET_RX_SOFTIRQ</code>уАВ</p></blockquote> <blockquote><p>ш┐ЩщЗМщЗКцФ╛ц╕ЕчРЖчЪДхПкцШп<code>sk_buffer</code>чЪДхЙпцЬмя╝МчЬЯцнгчЪД<code>sk_buffer</code>чО░хЬиш┐ШцШпхнШцФ╛хЬи<code>Socket</code>чЪДхПСщАБщШЯхИЧф╕нуАВхЙНщЭвхЬи<code>ф╝аш╛Ух▒В</code>хдДчРЖчЪДцЧ╢хАЩцИСф╗мцПРхИ░ш┐Зя╝МхЫаф╕║ф╝аш╛Ух▒ВщЬАшжБ<code>ф┐ЭшпБхПпщЭацАз</code>я╝МцЙАф╗е <code>sk_buffer</code>хЕ╢хоЮш┐Шц▓бцЬЙхИащЩдуАВхоГх╛ЧчнЙцФ╢хИ░хп╣цЦ╣чЪД ACK ф╣ЛхРОцЙНф╝ЪчЬЯцнгхИащЩдуАВ</p></blockquote> <h3 id="цАзшГ╜х╝АщФА-2"><a href="#цАзшГ╜х╝АщФА-2" class="header-anchor">#</a> цАзшГ╜х╝АщФА</h3> <p>хЙНш╛╣цИСф╗мцПРхИ░ф║ЖхЬич╜Сч╗ЬхМЕцОецФ╢ш┐ЗчиЛф╕нц╢ЙхПКхИ░чЪДцАзшГ╜х╝АщФАя╝МчО░хЬиф╗Лч╗НхоМф║Жч╜Сч╗ЬхМЕчЪДхПСщАБш┐ЗчиЛя╝МцИСф╗мцЭечЬЛф╕ЛхЬицХ░цНохМЕхПСщАБш┐ЗчиЛф╕нчЪДцАзшГ╜х╝АщФАя╝Ъ</p> <ul><li><p>хТМцОецФ╢цХ░цНоф╕Аца╖я╝Мх║ФчФичиЛх║ПхЬиш░ГчФи<code>ч│╗ч╗Яш░ГчФиsend</code>чЪДцЧ╢хАЩф╝Ъф╗О<code>чФицИ╖цАБ</code>ш╜мф╕║<code>хЖЕца╕цАБ</code>ф╗ехПКхПСщАБхоМцХ░цНохРОя╝М<code>ч│╗ч╗Яш░ГчФи</code>ш┐ФхЫЮцЧ╢ф╗О<code>хЖЕца╕цАБ</code>ш╜мф╕║<code>чФицИ╖цАБ</code>чЪДх╝АщФАуАВ</p></li> <li><p>чФицИ╖ч║┐чиЛхЖЕца╕цАБ<code>CPU quota</code>чФих░╜цЧ╢шзжхПС<code>NET_TX_SOFTIRQ</code>ч▒╗хЮЛш╜пф╕нцЦня╝МхЖЕца╕хУНх║Фш╜пф╕нцЦнчЪДх╝АщФАуАВ</p></li> <li><p>ч╜СхНбхПСщАБхоМцХ░цНоя╝МхРС<code>CPU</code>хПСщАБчбмф╕нцЦня╝М<code>CPU</code>хУНх║Фчбмф╕нцЦнчЪДх╝АщФАуАВф╗ехПКхЬичбмф╕нцЦнф╕нхПСщАБ<code>NET_RX_SOFTIRQ</code>ш╜пф╕нцЦнцЙзшбМхЕ╖ф╜УчЪДхЖЕхнШц╕ЕчРЖхКиф╜ЬуАВхЖЕца╕хУНх║Фш╜пф╕нцЦнчЪДх╝АщФАуАВ</p></li> <li><p>хЖЕхнШцЛ╖ш┤ЭчЪДх╝АщФАуАВцИСф╗мцЭехЫЮщб╛ф╕ЛхЬицХ░цНохМЕхПСщАБчЪДш┐ЗчиЛф╕нщГ╜хПСчФЯф║ЖхУкф║ЫхЖЕхнШцЛ╖ш┤Эя╝Ъ</p></li> <li><ul><li>хЬихЖЕца╕хНПшооцаИчЪДф╝аш╛Ух▒Вф╕ня╝М<code>TCPхНПшоо</code>хп╣х║ФчЪДхПСщАБхЗ╜цХ░<code>tcp_sendmsg</code>ф╝ЪчФ│шп╖<code>sk_buffer</code>я╝Мх░ЖчФицИ╖шжБхПСщАБчЪДцХ░цНо<code>цЛ╖ш┤Э</code>хИ░<code>sk_buffer</code>ф╕нуАВ</li> <li>хЬихПСщАБц╡БчиЛф╗Оф╝аш╛Ух▒ВхИ░ч╜Сч╗Ьх▒ВчЪДцЧ╢хАЩя╝Мф╝Ъ<code>цЛ╖ш┤Э</code>ф╕Аф╕к<code>sk_bufferхЙпцЬм</code>хЗ║цЭея╝Мх░Жш┐Щф╕к<code>sk_bufferхЙпцЬм</code>хРСф╕Лф╝ащАТуАВхОЯхзЛ<code>sk_buffer</code>ф┐ЭчХЩхЬи<code>Socket</code>хПСщАБщШЯхИЧф╕ня╝МчнЙх╛Еч╜Сч╗Ьхп╣члп<code>ACK</code>я╝Мхп╣члп<code>ACK</code>хРОхИащЩд<code>Socket</code>хПСщАБщШЯхИЧф╕нчЪД<code>sk_buffer</code>уАВхп╣члпц▓бцЬЙхПСщАБ<code>ACK</code>я╝МхИЩщЗНцЦ░ф╗О<code>Socket</code>хПСщАБщШЯхИЧф╕нхПСщАБя╝МхоЮчО░<code>TCPхНПшоо</code>чЪДхПпщЭаф╝аш╛УуАВ</li> <li>хЬич╜Сч╗Ьх▒Вя╝МхжВцЮЬхПСчО░шжБхПСщАБчЪДцХ░цНохдзф║О<code>MTU</code>я╝МхИЩф╝Ъш┐ЫшбМхИЖчЙЗцУНф╜Ья╝МчФ│шп╖щвЭхдЦчЪД<code>sk_buffer</code>я╝Мх╣╢х░ЖхОЯцЭечЪДsk_buffer<code>цЛ╖ш┤Э</code>хИ░хдЪф╕кх░ПчЪДsk_bufferф╕нуАВ</li></ul></li></ul> <h2 id="хЖНш░И-щШ╗хбЮ-щЭЮщШ╗хбЮ-ф╕О-хРМцне-х╝Вцне"><a href="#хЖНш░И-щШ╗хбЮ-щЭЮщШ╗хбЮ-ф╕О-хРМцне-х╝Вцне" class="header-anchor">#</a> хЖНш░И(щШ╗хбЮя╝МщЭЮщШ╗хбЮ)ф╕О(хРМцнея╝Мх╝Вцне)</h2> <p>хЬицИСф╗мшБКхоМч╜Сч╗ЬцХ░цНочЪДцОецФ╢хТМхПСщАБш┐ЗчиЛхРОя╝МцИСф╗мцЭеш░Иф╕ЛIOф╕нчЙ╣хИлхо╣цШУц╖╖ц╖ЖчЪДцжВх┐╡я╝Ъ<code>щШ╗хбЮф╕ОхРМцне</code>я╝М<code>щЭЮщШ╗хбЮф╕Ох╝Вцне</code>уАВ</p> <p>ч╜Сф╕КхРДчзНхНЪцЦЗш┐ШцЬЙхРДчзНф╣жч▒Нф╕нцЬЙхдзщЗПчЪДхЕ│ф║Ош┐Щф╕дф╕кцжВх┐╡чЪДшзгщЗКя╝Мф╜ЖцШпчмФшАЕшзЙх╛Чш┐ШцШпф╕НхдЯх╜вш▒бхМЦя╝МхПкцШпхп╣цжВх┐╡чЪДчФЯчбмшзгщЗКя╝МхжВцЮЬчбмхеЧцжВх┐╡чЪДшпЭя╝МхЕ╢хоЮцДЯшзЙ<code>щШ╗хбЮф╕ОхРМцне</code>я╝М<code>щЭЮщШ╗хбЮф╕Ох╝Вцне</code>ш┐ШцШпц▓бхХехМ║хИля╝МцЧ╢щЧ┤щХ┐ф║Жя╝Мш┐ШцШпцпФш╛Гцибч│Кхо╣цШУц╖╖ц╖ЖуАВ</p> <p>цЙАф╗ечмФшАЕхЬиш┐ЩщЗМх░ЭшпХцНвф╕АчзНцЫ┤хКах╜вш▒бхМЦя╝МцЫ┤хКахо╣цШУчРЖшзгшо░х┐ЖчЪДцЦ╣х╝ПцЭец╕ЕцЩ░хЬ░шзгщЗКф╕Лф╗Аф╣ИцШп<code>щШ╗хбЮф╕ОщЭЮщШ╗хбЮ</code>я╝Мф╗Аф╣ИцШп<code>хРМцнеф╕Ох╝Вцне</code>уАВ</p> <p>ч╗Пш┐ЗхЙНш╛╣хп╣ч╜Сч╗ЬцХ░цНохМЕцОецФ╢ц╡БчиЛчЪДф╗Лч╗Ня╝МхЬиш┐ЩщЗМцИСф╗мхПпф╗ех░ЖцХ┤ф╕кц╡БчиЛцА╗ч╗Уф╕║ф╕дф╕кщШ╢цо╡я╝Ъ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190903897.png" alt="хЫ╛чЙЗ"></p> <ul><li><strong>цХ░цНохЗЖхдЗщШ╢цо╡я╝Ъ</strong> хЬиш┐Щф╕кщШ╢цо╡я╝Мч╜Сч╗ЬцХ░цНохМЕхИ░ш╛╛ч╜СхНбя╝МщАЪш┐З<code>DMA</code>чЪДцЦ╣х╝Пх░ЖцХ░цНохМЕцЛ╖ш┤ЭхИ░хЖЕхнШф╕ня╝МчД╢хРОч╗Пш┐Зчбмф╕нцЦня╝Мш╜пф╕нцЦня╝МцОечЭАщАЪш┐ЗхЖЕца╕ч║┐чиЛ<code>ksoftirqd</code>ч╗Пш┐ЗхЖЕца╕хНПшооцаИчЪДхдДчРЖя╝МцЬАч╗Их░ЖцХ░цНохПСщАБхИ░<code>хЖЕца╕Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║ф╕нуАВ</li> <li><strong>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡я╝Ъ</strong> х╜УцХ░цНохИ░ш╛╛<code>хЖЕца╕Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║ф╕нцЧ╢я╝МцндцЧ╢цХ░цНохнШхЬиф║О<code>хЖЕца╕чй║щЧ┤</code>ф╕ня╝МщЬАшжБх░ЖцХ░цНо<code>цЛ╖ш┤Э</code>хИ░<code>чФицИ╖чй║щЧ┤</code>ф╕ня╝МцЙНшГ╜хдЯшвлх║ФчФичиЛх║Пшп╗хПЦуАВ</li></ul> <h3 id="щШ╗хбЮф╕ОщЭЮщШ╗хбЮ"><a href="#щШ╗хбЮф╕ОщЭЮщШ╗хбЮ" class="header-anchor">#</a> щШ╗хбЮф╕ОщЭЮщШ╗хбЮ</h3> <p>щШ╗хбЮф╕ОщЭЮщШ╗хбЮчЪДхМ║хИлф╕╗шжБхПСчФЯхЬичммф╕АщШ╢цо╡я╝Ъ<code>цХ░цНохЗЖхдЗщШ╢цо╡</code>уАВ</p> <p>х╜Ух║ФчФичиЛх║ПхПСш╡╖<code>ч│╗ч╗Яш░ГчФиread</code>цЧ╢я╝Мч║┐чиЛф╗ОчФицИ╖цАБш╜мф╕║хЖЕца╕цАБя╝Мшп╗хПЦхЖЕца╕<code>Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║ф╕нчЪДч╜Сч╗ЬцХ░цНоуАВ</p> <h4 id="щШ╗хбЮ"><a href="#щШ╗хбЮ" class="header-anchor">#</a> щШ╗хбЮ</h4> <p>хжВцЮЬш┐ЩцЧ╢хЖЕца╕<code>Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║ц▓бцЬЙцХ░цНоя╝МщВгф╣Ич║┐чиЛх░▒ф╝Ъф╕АчЫ┤<code>чнЙх╛Е</code>я╝МчЫ┤хИ░<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║цЬЙцХ░цНоф╕║цнвуАВщЪПхРОх░ЖцХ░цНоф╗ОхЖЕца╕чй║щЧ┤цЛ╖ш┤ЭхИ░чФицИ╖чй║щЧ┤я╝М<code>ч│╗ч╗Яш░ГчФиread</code>ш┐ФхЫЮуАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190906844.png" alt="хЫ╛чЙЗ"></p> <p>ф╗ОхЫ╛ф╕нцИСф╗мхПпф╗ечЬЛхЗ║я╝Ъ<strong>щШ╗хбЮ</strong>чЪДчЙ╣чВ╣цШпхЬичммф╕АщШ╢цо╡хТМчммф║МщШ╢цо╡<code>щГ╜ф╝ЪчнЙх╛Е</code>уАВ</p> <h4 id="щЭЮщШ╗хбЮ"><a href="#щЭЮщШ╗хбЮ" class="header-anchor">#</a> щЭЮщШ╗хбЮ</h4> <p><code>щШ╗хбЮ</code>хТМ<code>щЭЮщШ╗хбЮ</code>ф╕╗шжБчЪДхМ║хИЖцШпхЬичммф╕АщШ╢цо╡я╝Ъ<code>цХ░цНохЗЖхдЗщШ╢цо╡</code>уАВ</p> <ul><li>хЬичммф╕АщШ╢цо╡я╝Мх╜У<code>Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║ф╕нц▓бцЬЙцХ░цНочЪДцЧ╢хАЩя╝М<code>щШ╗хбЮцибх╝Пф╕Л</code>х║ФчФич║┐чиЛф╝Ъф╕АчЫ┤чнЙх╛ЕуАВ<code>щЭЮщШ╗хбЮцибх╝Пф╕Л</code>х║ФчФич║┐чиЛф╕Нф╝ЪчнЙх╛Ея╝М<code>ч│╗ч╗Яш░ГчФи</code>чЫ┤цОеш┐ФхЫЮщФЩшппцаЗх┐Ч<code>EWOULDBLOCK</code>уАВ</li> <li>х╜У<code>Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║ф╕нцЬЙцХ░цНочЪДцЧ╢хАЩя╝М<code>щШ╗хбЮ</code>хТМ<code>щЭЮщШ╗хбЮ</code>чЪДшбичО░цШпф╕Аца╖чЪДя╝МщГ╜ф╝Ъш┐ЫхЕечммф║МщШ╢цо╡<code>чнЙх╛Е</code>цХ░цНоф╗О<code>хЖЕца╕чй║щЧ┤</code>цЛ╖ш┤ЭхИ░<code>чФицИ╖чй║щЧ┤</code>я╝МчД╢хРО<code>ч│╗ч╗Яш░ГчФиш┐ФхЫЮ</code>уАВ</li></ul> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190906040.png" alt="хЫ╛чЙЗ"></p> <p>ф╗Оф╕КхЫ╛ф╕ня╝МцИСф╗мхПпф╗ечЬЛхЗ║я╝Ъ<strong>щЭЮщШ╗хбЮ</strong>чЪДчЙ╣чВ╣цШпчммф╕АщШ╢цо╡<code>ф╕Нф╝ЪчнЙх╛Е</code>я╝М<strong>ф╜ЖцШпхЬичммф║МщШ╢цо╡ш┐ШцШпф╝Ъ<code>чнЙх╛Е</code>уАВ</strong></p> <h3 id="хРМцнеф╕Ох╝Вцне"><a href="#хРМцнеф╕Ох╝Вцне" class="header-anchor">#</a> хРМцнеф╕Ох╝Вцне</h3> <p><code>хРМцне</code>ф╕О<code>х╝Вцне</code>ф╕╗шжБчЪДхМ║хИлхПСчФЯхЬичммф║МщШ╢цо╡я╝Ъ<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>уАВ</p> <p>хЙНш╛╣цИСф╗мцПРхИ░хЬи<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>ф╕╗шжБцШпх░ЖцХ░цНоф╗О<code>хЖЕца╕чй║щЧ┤</code>цЛ╖ш┤ЭхИ░<code>чФицИ╖чй║щЧ┤</code>уАВчД╢хРОх║ФчФичиЛх║ПцЙНхПпф╗ешп╗хПЦцХ░цНоуАВ</p> <p>х╜УхЖЕца╕<code>Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║цЬЙцХ░цНохИ░ш╛╛цЧ╢я╝Мш┐ЫхЕечммф║МщШ╢цо╡уАВ</p> <h4 id="хРМцне"><a href="#хРМцне" class="header-anchor">#</a> хРМцне</h4> <p><code>хРМцнецибх╝П</code>хЬицХ░цНохЗЖхдЗхе╜хРОя╝МцШпчФ▒<code>чФицИ╖ч║┐чиЛ</code>чЪД<code>хЖЕца╕цАБ</code>цЭецЙзшбМ<code>чммф║МщШ╢цо╡</code>уАВцЙАф╗ех║ФчФичиЛх║Пф╝ЪхЬичммф║МщШ╢цо╡хПСчФЯ<code>щШ╗хбЮ</code>я╝МчЫ┤хИ░цХ░цНоф╗О<code>хЖЕца╕чй║щЧ┤</code>цЛ╖ш┤ЭхИ░<code>чФицИ╖чй║щЧ┤</code>я╝Мч│╗ч╗Яш░ГчФицЙНф╝Ъш┐ФхЫЮуАВ</p> <p>Linuxф╕ЛчЪД <code>epoll</code>хТМMac ф╕ЛчЪД <code>kqueue</code>щГ╜х▒Юф║О<code>хРМцне IO</code>уАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190907790.png" alt="хЫ╛чЙЗ"></p> <h4 id="х╝Вцне"><a href="#х╝Вцне" class="header-anchor">#</a> х╝Вцне</h4> <p><code>х╝Вцнецибх╝П</code>ф╕ЛцШпчФ▒<code>хЖЕца╕</code>цЭецЙзшбМчммф║МщШ╢цо╡чЪДцХ░цНоцЛ╖ш┤ЭцУНф╜Ья╝Мх╜У<code>хЖЕца╕</code>цЙзшбМхоМчммф║МщШ╢цо╡я╝Мф╝ЪщАЪчЯечФицИ╖ч║┐чиЛIOцУНф╜Ьх╖▓ч╗ПхоМцИРя╝Мх╣╢х░ЖцХ░цНохЫЮш░Гч╗ЩчФицИ╖ч║┐чиЛуАВцЙАф╗ехЬи<code>х╝Вцнецибх╝П</code>ф╕Л <code>цХ░цНохЗЖхдЗщШ╢цо╡</code>хТМ<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>хЭЗцШпчФ▒<code>хЖЕца╕</code>цЭехоМцИРя╝Мф╕Нф╝Ъхп╣х║ФчФичиЛх║ПщАацИРф╗╗ф╜ХщШ╗хбЮуАВ</p> <p>хЯ║ф║Оф╗еф╕КчЙ╣х╛Бя╝МцИСф╗мхПпф╗ечЬЛхИ░<code>х╝Вцнецибх╝П</code>щЬАшжБхЖЕца╕чЪДцФпцМБя╝МцпФш╛Гф╛Эш╡ЦцУНф╜Ьч│╗ч╗Ях║Хх▒ВчЪДцФпцМБуАВ</p> <p>хЬичЫохЙНц╡БшбМчЪДцУНф╜Ьч│╗ч╗Яф╕ня╝МхПкцЬЙWindows ф╕нчЪД <code>IOCP</code>цЙНчЬЯцнгх▒Юф║Ох╝Вцне IOя╝МхоЮчО░чЪДф╣ЯщЭЮх╕╕цИРчЖЯуАВф╜ЖWindowsх╛Их░СчФицЭеф╜Ьф╕║цЬНхКбхЩиф╜┐чФиуАВ</p> <p>шАМх╕╕чФицЭеф╜Ьф╕║цЬНхКбхЩиф╜┐чФичЪДLinuxя╝М<code>х╝ВцнеIOцЬ║хИ╢</code>хоЮчО░чЪДф╕НхдЯцИРчЖЯя╝Мф╕ОNIOчЫ╕цпФцАзшГ╜цПРхНЗчЪДф╣Яф╕НхдЯцШОцШ╛уАВ</p> <p>ф╜ЖLinux kernel хЬи5.1чЙИцЬмчФ▒FacebookчЪДхдзчеЮJens Axboeх╝ХхЕеф║ЖцЦ░чЪДх╝ВцнеIOх║У<code>io_uring</code> цФ╣хЦДф║ЖхОЯцЭеLinux native AIOчЪДф╕Аф║ЫцАзшГ╜щЧощвШуАВцАзшГ╜чЫ╕цпФ<code>Epoll</code>ф╗ехПКф╣ЛхЙНхОЯчФЯчЪД<code>AIO</code>цПРщлШф║Жф╕Нх░Ся╝МхА╝х╛ЧхЕ│ц│иуАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190908945.png" alt=""></p> <h2 id="ioцибхЮЛ"><a href="#ioцибхЮЛ" class="header-anchor">#</a> IOцибхЮЛ</h2> <p>хЬиш┐ЫшбМч╜Сч╗ЬIOцУНф╜ЬцЧ╢я╝МчФиф╗Аф╣Ица╖чЪДIOцибхЮЛцЭешп╗хЖЩцХ░цНох░ЖхЬих╛ИхдзчиЛх║жф╕КхЖ│хоЪф║Жч╜Сч╗ЬцбЖцЮ╢чЪДIOцАзшГ╜уАВцЙАф╗еIOцибхЮЛчЪДщАЙцЛйцШпцЮДх╗║ф╕Аф╕кщлШцАзшГ╜ч╜Сч╗ЬцбЖцЮ╢чЪДхЯ║чбАуАВ</p> <p>хЬиуАКUNIX ч╜Сч╗Ьч╝ЦчиЛуАЛф╕Аф╣жф╕нф╗Лч╗Нф║Жф║ФчзНIOцибхЮЛя╝Ъ<code>щШ╗хбЮIO</code>,<code>щЭЮщШ╗хбЮIO</code>,<code>IOхдЪш╖пхдНчФи</code>,<code>ф┐бхП╖щй▒хКиIO</code>,<code>х╝ВцнеIO</code>я╝МцпПф╕АчзНIOцибхЮЛчЪДхЗ║чО░щГ╜цШпхп╣хЙНф╕АчзНчЪДхНЗч║зф╝ШхМЦуАВ</p> <p>ф╕ЛщЭвцИСф╗мх░▒цЭехИЖхИлф╗Лч╗Нф╕Лш┐Щф║ФчзНIOцибхЮЛхРДшЗкщГ╜шзгхЖ│ф║Жф╗Аф╣ИщЧощвШя╝МщАВчФиф║ОхУкф║ЫхЬ║цЩпя╝МхРДшЗкчЪДф╝Шч╝║чВ╣цШпф╗Аф╣Ия╝Я</p> <h3 id="щШ╗хбЮio-bio"><a href="#щШ╗хбЮio-bio" class="header-anchor">#</a> щШ╗хбЮIOя╝ИBIOя╝Й</h3> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190908331.png" alt="хЫ╛чЙЗ"></p> <p>ч╗Пш┐ЗхЙНф╕Ах░ПшКВхп╣<code>щШ╗хбЮ</code>ш┐Щф╕кцжВх┐╡чЪДф╗Лч╗Ня╝МчЫ╕ф┐бхдзхо╢хПпф╗ех╛Ихо╣цШУчРЖшзг<code>щШ╗хбЮIO</code>чЪДцжВх┐╡хТМш┐ЗчиЛуАВ</p> <p>цЧвчД╢ш┐Щх░ПшКВцИСф╗мш░ИчЪДцШп<code>IO</code>я╝МщВгф╣Иф╕Лш╛╣цИСф╗мцЭечЬЛф╕ЛхЬи<code>щШ╗хбЮIO</code>цибхЮЛф╕Ля╝Мч╜Сч╗ЬцХ░цНочЪДшп╗хЖЩш┐ЗчиЛуАВ</p> <h4 id="щШ╗хбЮшп╗"><a href="#щШ╗хбЮшп╗" class="header-anchor">#</a> щШ╗хбЮшп╗</h4> <p>х╜УчФицИ╖ч║┐чиЛхПСш╡╖<code>read</code>ч│╗ч╗Яш░ГчФия╝МчФицИ╖ч║┐чиЛф╗ОчФицИ╖цАБхИЗцНвхИ░хЖЕца╕цАБя╝МхЬихЖЕца╕ф╕нхО╗цЯечЬЛ<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║цШпхРжцЬЙцХ░цНохИ░цЭеуАВ</p> <ul><li><code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║ф╕н<code>цЬЙцХ░цНо</code>я╝МхИЩчФицИ╖ч║┐чиЛхЬихЖЕца╕цАБх░ЖхЖЕца╕чй║щЧ┤ф╕нчЪДцХ░цНоцЛ╖ш┤ЭхИ░чФицИ╖чй║щЧ┤я╝Мч│╗ч╗ЯIOш░ГчФиш┐ФхЫЮуАВ</li> <li><code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║ф╕н<code>цЧацХ░цНо</code>я╝МхИЩчФицИ╖ч║┐чиЛшойхЗ║CPUя╝Мш┐ЫхЕе<code>щШ╗хбЮчК╢цАБ</code>уАВх╜УцХ░цНохИ░ш╛╛<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║хРОя╝МхЖЕца╕хФдщЖТ<code>щШ╗хбЮчК╢цАБ</code>ф╕нчЪДчФицИ╖ч║┐чиЛш┐ЫхЕе<code>х░▒ч╗кчК╢цАБ</code>я╝МщЪПхРОч╗Пш┐ЗCPUчЪДш░Гх║жшО╖хПЦхИ░<code>CPU quota</code>ш┐ЫхЕе<code>ш┐РшбМчК╢цАБ</code>я╝Мх░ЖхЖЕца╕чй║щЧ┤чЪДцХ░цНоцЛ╖ш┤ЭхИ░чФицИ╖чй║щЧ┤я╝МщЪПхРОч│╗ч╗Яш░ГчФиш┐ФхЫЮуАВ</li></ul> <h4 id="щШ╗хбЮхЖЩ"><a href="#щШ╗хбЮхЖЩ" class="header-anchor">#</a> щШ╗хбЮхЖЩ</h4> <p>х╜УчФицИ╖ч║┐чиЛхПСш╡╖<code>send</code>ч│╗ч╗Яш░ГчФицЧ╢я╝МчФицИ╖ч║┐чиЛф╗ОчФицИ╖цАБхИЗцНвхИ░хЖЕца╕цАБя╝Мх░ЖхПСщАБцХ░цНоф╗ОчФицИ╖чй║щЧ┤цЛ╖ш┤ЭхИ░хЖЕца╕чй║щЧ┤ф╕нчЪД<code>Socket</code>хПСщАБч╝УхЖ▓хМ║ф╕нуАВ</p> <ul><li>х╜У<code>Socket</code>хПСщАБч╝УхЖ▓хМ║шГ╜хдЯхо╣ч║│ф╕ЛхПСщАБцХ░цНоцЧ╢я╝МчФицИ╖ч║┐чиЛф╝Ъх░ЖхЕищГичЪДхПСщАБцХ░цНохЖЩхЕе<code>Socket</code>ч╝УхЖ▓хМ║я╝МчД╢хРОцЙзшбМхЬиуАКч╜Сч╗ЬхМЕхПСщАБц╡БчиЛуАЛш┐Щх░ПшКВф╗Лч╗НчЪДхРОч╗нц╡БчиЛя╝МчД╢хРОш┐ФхЫЮуАВ</li> <li>х╜У<code>Socket</code>хПСщАБч╝УхЖ▓хМ║чй║щЧ┤ф╕НхдЯя╝МцЧац│Ххо╣ч║│ф╕ЛхЕищГихПСщАБцХ░цНоцЧ╢я╝МчФицИ╖ч║┐чиЛшойхЗ║CPU,ш┐ЫхЕе<code>щШ╗хбЮчК╢цАБ</code>я╝МчЫ┤хИ░<code>Socket</code>хПСщАБч╝УхЖ▓хМ║шГ╜хдЯхо╣ч║│ф╕ЛхЕищГихПСщАБцХ░цНоцЧ╢я╝МхЖЕца╕хФдщЖТчФицИ╖ч║┐чиЛя╝МцЙзшбМхРОч╗нхПСщАБц╡БчиЛуАВ</li></ul> <p><code>щШ╗хбЮIO</code>цибхЮЛф╕ЛчЪДхЖЩцУНф╜ЬхБЪф║ЛщгОца╝цпФш╛ГчбмхИЪя╝МщЭЮх╛ЧшжБцККхЕищГичЪДхПСщАБцХ░цНохЖЩхЕехПСщАБч╝УхЖ▓хМ║цЙНшВпхЦДч╜вчФШф╝СуАВ</p> <h4 id="щШ╗хбЮioцибхЮЛ"><a href="#щШ╗хбЮioцибхЮЛ" class="header-anchor">#</a> щШ╗хбЮIOцибхЮЛ</h4> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190910768.png" alt="хЫ╛чЙЗ"></p> <p>чФ▒ф║О<code>щШ╗хбЮIO</code>чЪДшп╗хЖЩчЙ╣чВ╣я╝МцЙАф╗ехп╝шЗ┤хЬи<code>щШ╗хбЮIO</code>цибхЮЛф╕Ля╝МцпПф╕кшп╖ц▒ВщГ╜щЬАшжБшвлф╕Аф╕кчЛмчлЛчЪДч║┐чиЛхдДчРЖуАВф╕Аф╕кч║┐чиЛхЬихРМф╕АцЧ╢хИ╗хПкшГ╜ф╕Оф╕Аф╕кш┐ЮцОеч╗СхоЪуАВцЭеф╕Аф╕кшп╖ц▒Вя╝МцЬНхКбчлпх░▒щЬАшжБхИЫх╗║ф╕Аф╕кч║┐чиЛчФицЭехдДчРЖшп╖ц▒ВуАВ</p> <p>х╜УховцИ╖члпшп╖ц▒ВчЪДх╣╢хПСщЗПчкБчД╢хвЮхдзцЧ╢я╝МцЬНхКбчлпхЬиф╕АчЮмщЧ┤х░▒ф╝ЪхИЫх╗║хЗ║хдзщЗПчЪДч║┐чиЛя╝МшАМхИЫх╗║ч║┐чиЛцШпщЬАшжБч│╗ч╗Яш╡Дц║Рх╝АщФАчЪДя╝Мш┐Щца╖ф╕АцЭех░▒ф╝Ъф╕АчЮмщЧ┤хНачФихдзщЗПчЪДч│╗ч╗Яш╡Дц║РуАВ</p> <p>хжВцЮЬховцИ╖члпхИЫх╗║хе╜ш┐ЮцОехРОя╝Мф╜ЖцШпф╕АчЫ┤ф╕НхПСцХ░цНоя╝МщАЪх╕╕хдзщГихИЖцГЕхЖ╡ф╕Ля╝Мч╜Сч╗Ьш┐ЮцОеф╣Я<code>х╣╢ф╕Н</code>цА╗цШпцЬЙцХ░цНохПпшп╗я╝МщВгф╣ИхЬичй║щЧ▓чЪДш┐Щцо╡цЧ╢щЧ┤хЖЕя╝МцЬНхКбчлпч║┐чиЛх░▒ф╝Ъф╕АчЫ┤хдДф║О<code>щШ╗хбЮчК╢цАБ</code>я╝МцЧац│Хх╣▓хЕ╢ф╗ЦчЪДф║ЛцГЕуАВCPUф╣Я<code>цЧац│Хх╛ЧхИ░хЕЕхИЖчЪДхПСцМе</code>я╝МхРМцЧ╢ш┐Шф╝Ъ<code>хп╝шЗ┤хдзщЗПч║┐чиЛхИЗцНвчЪДх╝АщФА</code>уАВ</p> <h4 id="щАВчФихЬ║цЩп"><a href="#щАВчФихЬ║цЩп" class="header-anchor">#</a> щАВчФихЬ║цЩп</h4> <p>хЯ║ф║Оф╗еф╕К<code>щШ╗хбЮIOцибхЮЛ</code>чЪДчЙ╣чВ╣я╝МшпецибхЮЛхПкщАВчФиф║О<code>ш┐ЮцОецХ░х░С</code>я╝М<code>х╣╢хПСх║жф╜О</code>чЪДф╕ЪхКбхЬ║цЩпуАВ</p> <p>цпФхжВхЕмхП╕хЖЕщГичЪДф╕Аф║ЫчобчРЖч│╗ч╗Яя╝МщАЪх╕╕шп╖ц▒ВцХ░хЬи100ф╕кх╖жхП│я╝Мф╜┐чФи<code>щШ╗хбЮIOцибхЮЛ</code>ш┐ШцШпщЭЮх╕╕щАВхРИчЪДуАВшАМф╕ФцАзшГ╜ш┐Шф╕Нш╛УNIOуАВ</p> <p>шпецибхЮЛхЬиC10Kф╣ЛхЙНя╝МцШпцЩощБНшвлщЗЗчФичЪДф╕АчзНIOцибхЮЛуАВ</p> <h3 id="щЭЮщШ╗хбЮio-nio"><a href="#щЭЮщШ╗хбЮio-nio" class="header-anchor">#</a> щЭЮщШ╗хбЮIOя╝ИNIOя╝Й</h3> <p><code>щШ╗хбЮIOцибхЮЛ</code>цЬАхдзчЪДщЧощвШх░▒цШпф╕Аф╕кч║┐чиЛхПкшГ╜хдДчРЖф╕Аф╕кш┐ЮцОея╝МхжВцЮЬш┐Щф╕кш┐ЮцОеф╕Кц▓бцЬЙцХ░цНочЪДшпЭя╝МщВгф╣Иш┐Щф╕кч║┐чиЛх░▒хПкшГ╜щШ╗хбЮхЬич│╗ч╗ЯIOш░ГчФиф╕Кя╝Мф╕НшГ╜х╣▓хЕ╢ф╗ЦчЪДф║ЛцГЕуАВш┐Щхп╣ч│╗ч╗Яш╡Дц║РцЭешп┤я╝МцШпф╕АчзНцЮБхдзчЪДц╡кш┤╣уАВхРМцЧ╢хдзщЗПчЪДч║┐чиЛф╕Кф╕ЛцЦЗхИЗцНвя╝Мф╣ЯцШпф╕Аф╕кх╖ихдзчЪДч│╗ч╗Ях╝АщФАуАВ</p> <p>цЙАф╗еф╕║ф║ЖшзгхЖ│ш┐Щф╕кщЧощвШя╝М<strong>цИСф╗мх░▒щЬАшжБчФих░╜хПпшГ╜х░СчЪДч║┐чиЛхО╗хдДчРЖцЫ┤хдЪчЪДш┐ЮцОеуАВ</strong>я╝М<code>ч╜Сч╗ЬIOцибхЮЛчЪДц╝ФхПШ</code>ф╣ЯцШпца╣цНош┐Щф╕кщЬАц▒ВцЭеф╕Ацнеф╕Ацнец╝Фш┐ЫчЪДуАВ</p> <p>хЯ║ф║Ош┐Щф╕кщЬАц▒Вя╝Мчммф╕АчзНшзгхЖ│цЦ╣цбИ<code>щЭЮщШ╗хбЮIO</code>х░▒хЗ║чО░ф║ЖуАВцИСф╗мхЬиф╕Кф╕Ах░ПшКВф╕нф╗Лч╗Нф║Ж<code>щЭЮщШ╗хбЮ</code>чЪДцжВх┐╡я╝МчО░хЬицИСф╗мцЭечЬЛф╕Лч╜Сч╗Ьшп╗хЖЩцУНф╜ЬхЬи<code>щЭЮщШ╗хбЮIO</code>ф╕ЛчЪДчЙ╣чВ╣я╝Ъ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190911259.png" alt="хЫ╛чЙЗ"></p> <h4 id="щЭЮщШ╗хбЮшп╗"><a href="#щЭЮщШ╗хбЮшп╗" class="header-anchor">#</a> щЭЮщШ╗хбЮшп╗</h4> <p>х╜УчФицИ╖ч║┐чиЛхПСш╡╖щЭЮщШ╗хбЮ<code>read</code>ч│╗ч╗Яш░ГчФицЧ╢я╝МчФицИ╖ч║┐чиЛф╗О<code>чФицИ╖цАБ</code>ш╜мф╕║<code>хЖЕца╕цАБ</code>я╝МхЬихЖЕца╕ф╕нхО╗цЯечЬЛ<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║цШпхРжцЬЙцХ░цНохИ░цЭеуАВ</p> <ul><li><code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║ф╕н<code>цЧацХ░цНо</code>я╝Мч│╗ч╗Яш░ГчФичлЛщймш┐ФхЫЮя╝Мх╣╢х╕жцЬЙф╕Аф╕к <code>EWOULDBLOCK</code> цИЦ <code>EAGAIN</code>щФЩшппя╝Мш┐Щф╕кщШ╢цо╡чФицИ╖ч║┐чиЛ<code>ф╕Нф╝ЪщШ╗хбЮ</code>я╝Мф╣Я<code>ф╕Нф╝ЪшойхЗ║CPU</code>я╝МшАМцШпф╝Ъч╗зч╗н<code>ш╜ошон</code>чЫ┤хИ░<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║ф╕нцЬЙцХ░цНоф╕║цнвуАВ</li> <li><code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║ф╕н<code>цЬЙцХ░цНо</code>я╝МчФицИ╖ч║┐чиЛхЬи<code>хЖЕца╕цАБ</code>ф╝Ъх░Ж<code>хЖЕца╕чй║щЧ┤</code>ф╕нчЪДцХ░цНоцЛ╖ш┤ЭхИ░<code>чФицИ╖чй║щЧ┤</code>я╝М<strong>ц│ицДП</strong>ш┐Щф╕кцХ░цНоцЛ╖ш┤ЭщШ╢цо╡я╝Мх║ФчФичиЛх║ПцШп<code>щШ╗хбЮчЪД</code>я╝Мх╜УцХ░цНоцЛ╖ш┤ЭхоМцИРя╝Мч│╗ч╗Яш░ГчФиш┐ФхЫЮуАВ</li></ul> <h4 id="щЭЮщШ╗хбЮхЖЩ"><a href="#щЭЮщШ╗хбЮхЖЩ" class="header-anchor">#</a> щЭЮщШ╗хбЮхЖЩ</h4> <p>хЙНш╛╣цИСф╗мхЬиф╗Лч╗Н<code>щШ╗хбЮхЖЩ</code>чЪДцЧ╢хАЩцПРхИ░<code>щШ╗хбЮхЖЩ</code>чЪДщгОца╝чЙ╣хИлчЪДчбмцЬЧя╝Мхд┤цпФш╛ГщУБщЭЮшжБцККхЕищГихПСщАБцХ░цНоф╕АцмбцАзщГ╜хЖЩхИ░<code>Socket</code>чЪДхПСщАБч╝УхЖ▓хМ║ф╕нцЙНш┐ФхЫЮя╝МхжВцЮЬхПСщАБч╝УхЖ▓хМ║ф╕нц▓бцЬЙш╢│хдЯчЪДчй║щЧ┤хо╣ч║│я╝МщВгф╣Их░▒ф╕АчЫ┤щШ╗хбЮцн╗чнЙя╝МчЙ╣хИлчЪДхИЪуАВ</p> <p>чЫ╕цпФш╛ГшАМшиА<code>щЭЮщШ╗хбЮхЖЩ</code>чЪДчЙ╣чВ╣х░▒цпФш╛Гф╜Ыч│╗я╝Мх╜УхПСщАБч╝УхЖ▓хМ║ф╕нц▓бцЬЙш╢│хдЯчЪДчй║щЧ┤хо╣ч║│хЕищГихПСщАБцХ░цНоцЧ╢я╝М<code>щЭЮщШ╗хбЮхЖЩ</code>чЪДчЙ╣чВ╣цШп<code>шГ╜хЖЩхдЪх░СхЖЩхдЪх░С</code>я╝МхЖЩф╕Нф╕Лф║Жя╝Мх░▒члЛхН│ш┐ФхЫЮуАВх╣╢х░ЖхЖЩхЕехИ░хПСщАБч╝УхЖ▓хМ║чЪДхнЧшКВцХ░ш┐ФхЫЮч╗Щх║ФчФичиЛх║Пя╝МцЦ╣ф╛┐чФицИ╖ч║┐чиЛф╕НцЦнчЪД<code>ш╜ошон</code>х░ЭшпХх░Ж<code>хЙйф╕ЛчЪДцХ░цНо</code>хЖЩхЕехПСщАБч╝УхЖ▓хМ║ф╕нуАВ</p> <h4 id="щЭЮщШ╗хбЮioцибхЮЛ"><a href="#щЭЮщШ╗хбЮioцибхЮЛ" class="header-anchor">#</a> щЭЮщШ╗хбЮIOцибхЮЛ</h4> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190912819.png" alt="хЫ╛чЙЗ"></p> <p>хЯ║ф║Оф╗еф╕К<code>щЭЮщШ╗хбЮIO</code>чЪДчЙ╣чВ╣я╝МцИСф╗мх░▒ф╕Нх┐ЕхГП<code>щШ╗хбЮIO</code>щВгца╖ф╕║цпПф╕кшп╖ц▒ВхИЖщЕНф╕Аф╕кч║┐чиЛхО╗хдДчРЖш┐ЮцОеф╕КчЪДшп╗хЖЩф║ЖуАВ</p> <p>цИСф╗мхПпф╗ехИйчФи<strong>ф╕Аф╕кч║┐чиЛцИЦшАЕх╛Их░СчЪДч║┐чиЛ</strong>я╝МхО╗<code>ф╕НцЦнхЬ░ш╜ошпв</code>цпПф╕к<code>Socket</code>чЪДцОецФ╢ч╝УхЖ▓хМ║цШпхРжцЬЙцХ░цНохИ░ш╛╛я╝МхжВцЮЬц▓бцЬЙцХ░цНоя╝М<code>ф╕Нх┐ЕщШ╗хбЮ</code>ч║┐чиЛя╝МшАМцШпцОечЭАхО╗<code>ш╜ошпв</code>ф╕Лф╕Аф╕к<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║я╝МчЫ┤хИ░ш╜ошпвхИ░цХ░цНохРОя╝МхдДчРЖш┐ЮцОеф╕КчЪДшп╗хЖЩя╝МцИЦшАЕф║дч╗Щф╕ЪхКбч║┐чиЛц▒ахО╗хдДчРЖя╝Мш╜ошпвч║┐чиЛхИЩ<code>ч╗зч╗нш╜ошпв</code>хЕ╢ф╗ЦчЪД<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║уАВ</p> <p>ш┐Щца╖ф╕Аф╕к<code>щЭЮщШ╗хбЮIOцибхЮЛ</code>х░▒хоЮчО░ф║ЖцИСф╗мхЬицЬмх░ПшКВх╝АхзЛцПРхЗ║чЪДщЬАц▒Вя╝Ъ<strong>цИСф╗мщЬАшжБчФих░╜хПпшГ╜х░СчЪДч║┐чиЛхО╗хдДчРЖцЫ┤хдЪчЪДш┐ЮцОе</strong></p> <h4 id="щАВчФихЬ║цЩп-2"><a href="#щАВчФихЬ║цЩп-2" class="header-anchor">#</a> щАВчФихЬ║цЩп</h4> <p>шЩ╜чД╢<code>щЭЮщШ╗хбЮIOцибхЮЛ</code>ф╕О<code>щШ╗хбЮIOцибхЮЛ</code>чЫ╕цпФя╝МхЗПх░Сф║Жх╛Ихдзф╕АщГихИЖчЪДш╡Дц║Рц╢ИшАЧхТМч│╗ч╗Ях╝АщФАуАВ</p> <p>ф╜ЖцШпхоГф╗НчД╢цЬЙх╛ИхдзчЪДцАзшГ╜щЧощвШя╝МхЫаф╕║хЬи<code>щЭЮщШ╗хбЮIOцибхЮЛ</code>ф╕Ля╝МщЬАшжБчФицИ╖ч║┐чиЛхО╗<code>ф╕НцЦнхЬ░</code>хПСш╡╖<code>ч│╗ч╗Яш░ГчФи</code>хО╗ш╜ошон<code>Socket</code>цОецФ╢ч╝УхЖ▓хМ║я╝Мш┐Щх░▒щЬАшжБчФицИ╖ч║┐чиЛф╕НцЦнхЬ░ф╗О<code>чФицИ╖цАБ</code>хИЗцНвхИ░<code>хЖЕца╕цАБ</code>я╝М<code>хЖЕца╕цАБ</code>хИЗцНвхИ░<code>чФицИ╖цАБ</code>уАВщЪПчЭАх╣╢хПСщЗПчЪДхвЮхдзя╝Мш┐Щф╕кф╕Кф╕ЛцЦЗхИЗцНвчЪДх╝АщФАф╣ЯцШпх╖ихдзчЪДуАВ</p> <p>цЙАф╗ехНХч║пчЪД<code>щЭЮщШ╗хбЮIO</code>цибхЮЛш┐ШцШпцЧац│ХщАВчФиф║ОщлШх╣╢хПСчЪДхЬ║цЩпуАВхПкшГ╜щАВчФиф║О<code>C10K</code>ф╗еф╕ЛчЪДхЬ║цЩпуАВ</p> <h3 id="io-хдЪш╖пхдНчФи"><a href="#io-хдЪш╖пхдНчФи" class="header-anchor">#</a> IO хдЪш╖пхдНчФи</h3> <h3 id="ф┐бхП╖щй▒хКиio"><a href="#ф┐бхП╖щй▒хКиio" class="header-anchor">#</a> ф┐бхП╖щй▒хКиIO</h3> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190942510.png" alt="хЫ╛чЙЗ">ф┐бхП╖щй▒хКиIO.png</p> <p>хдзхо╢хп╣ш┐Щф╕кшгЕхдЗшВпхоЪф╕Нф╝ЪщЩМчФЯя╝Мх╜УцИСф╗мхО╗ф╕Аф║Ыч╛ОщгЯхЯОхРГщенчЪДцЧ╢хАЩя╝МчВ╣хоМщдРф╗Шф║ЖщТ▒я╝МшАБцЭ┐ф╝Ъч╗ЩцИСф╗мф╕Аф╕кф┐бхП╖хЩиуАВчД╢хРОцИСф╗мх╕жчЭАш┐Щф╕кф┐бхП╖хЩихПпф╗ехО╗цЙ╛щдРцбМя╝МцИЦшАЕх╣▓ф║ЫхЕ╢ф╗ЦчЪДф║ЛцГЕуАВх╜Уф┐бхП╖хЩиф║оф║ЖчЪДцЧ╢хАЩя╝Мш┐ЩцЧ╢ф╗гшбищенщдРх╖▓ч╗ПхБЪхе╜я╝МцИСф╗мхПпф╗ехО╗чкЧхПгхПЦщдРф║ЖуАВ</p> <p>ш┐Щф╕кхЕ╕хЮЛчЪДчФЯц┤╗хЬ║цЩпхТМцИСф╗мшжБф╗Лч╗НчЪД<code>ф┐бхП╖щй▒хКиIOцибхЮЛ</code>х░▒х╛ИхГПуАВ</p> <p>хЬи<code>ф┐бхП╖щй▒хКиIOцибхЮЛ</code>ф╕Ля╝МчФицИ╖ш┐ЫчиЛцУНф╜ЬщАЪш┐З<code>ч│╗ч╗Яш░ГчФи sigaction хЗ╜цХ░</code>хПСш╡╖ф╕Аф╕к IO шп╖ц▒Вя╝МхЬихп╣х║ФчЪД<code>socket</code>ц│ихЖМф╕Аф╕к<code>ф┐бхП╖хЫЮш░Г</code>я╝МцндцЧ╢<code>ф╕НщШ╗хбЮ</code>чФицИ╖ш┐ЫчиЛя╝Мш┐ЫчиЛф╝Ъч╗зч╗нх╖еф╜ЬуАВх╜УхЖЕца╕цХ░цНох░▒ч╗кцЧ╢я╝МхЖЕца╕х░▒ф╕║шпеш┐ЫчиЛчФЯцИРф╕Аф╕к <code>SIGIO ф┐бхП╖</code>я╝МщАЪш┐Зф┐бхП╖хЫЮш░ГщАЪчЯеш┐ЫчиЛш┐ЫшбМчЫ╕хЕ│ IO цУНф╜ЬуАВ</p> <blockquote><p>ш┐ЩщЗМщЬАшжБц│ицДПчЪДцШпя╝Ъ<code>ф┐бхП╖щй▒хКих╝П IO цибхЮЛ</code>ф╛ЭчД╢цШп<code>хРМцнеIO</code>я╝МхЫаф╕║хоГшЩ╜чД╢хПпф╗ехЬичнЙх╛ЕцХ░цНочЪДцЧ╢хАЩф╕НшвлщШ╗хбЮя╝Мф╣Яф╕Нф╝ЪщвСч╣БчЪДш╜ошпвя╝Мф╜ЖцШпх╜УцХ░цНох░▒ч╗кя╝МхЖЕца╕ф┐бхП╖щАЪчЯехРОя╝МчФицИ╖ш┐ЫчиЛф╛ЭчД╢шжБшЗкх╖▒хО╗шп╗хПЦцХ░цНоя╝МхЬи<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>хПСчФЯщШ╗хбЮуАВ</p></blockquote> <blockquote><p>ф┐бхП╖щй▒хКи IOцибхЮЛ чЫ╕цпФф║ОхЙНф╕ЙчзН IO цибхЮЛя╝МхоЮчО░ф║ЖхЬичнЙх╛ЕцХ░цНох░▒ч╗кцЧ╢я╝Мш┐ЫчиЛф╕НшвлщШ╗хбЮя╝Мф╕╗х╛кчОпхПпф╗еч╗зч╗нх╖еф╜Ья╝МцЙАф╗е<code>чРЖшо║ф╕К</code>цАзшГ╜цЫ┤ф╜│уАВ</p></blockquote> <p>ф╜ЖцШпхоЮщЩЕф╕Кя╝Мф╜┐чФи<code>TCPхНПшоо</code>щАЪф┐бцЧ╢я╝М<code>ф┐бхП╖щй▒хКиIOцибхЮЛ</code>хЗаф╣О<code>ф╕Нф╝ЪшвлщЗЗчФи</code>уАВхОЯхЫахжВф╕Ля╝Ъ</p> <ul><li>ф┐бхП╖IO хЬихдзщЗП IO цУНф╜ЬцЧ╢хПпшГ╜ф╝ЪхЫаф╕║ф┐бхП╖щШЯхИЧц║вхЗ║хп╝шЗ┤ц▓бц│ХщАЪчЯе</li> <li><code>SIGIO ф┐бхП╖</code>цШпф╕АчзН Unix ф┐бхП╖я╝Мф┐бхП╖ц▓бцЬЙщЩДхКаф┐бцБпя╝МхжВцЮЬф╕Аф╕кф┐бхП╖ц║РцЬЙхдЪчзНф║зчФЯф┐бхП╖чЪДхОЯхЫая╝Мф┐бхП╖цОецФ╢шАЕх░▒цЧац│ХчбохоЪчй╢члЯхПСчФЯф║Жф╗Аф╣ИуАВшАМ TCP socket чФЯф║зчЪДф┐бхП╖ф║Лф╗╢цЬЙф╕ГчзНф╣ЛхдЪя╝Мш┐Щца╖х║ФчФичиЛх║ПцФ╢хИ░ SIGIOя╝Мца╣цЬмцЧаф╗ОхМ║хИЖхдДчРЖуАВ</li></ul> <p>ф╜Ж<code>ф┐бхП╖щй▒хКиIOцибхЮЛ</code>хПпф╗ечФихЬи <code>UDP</code>щАЪф┐бф╕Кя╝МхЫаф╕║UDP хПкцЬЙ<code>ф╕Аф╕кцХ░цНошп╖ц▒Вф║Лф╗╢</code>я╝Мш┐Щф╣Ях░▒цДПхС│чЭАхЬицнгх╕╕цГЕхЖ╡ф╕Л UDP ш┐ЫчиЛхПкшжБцНХшО╖ SIGIO ф┐бхП╖я╝Мх░▒ш░ГчФи <code>read ч│╗ч╗Яш░ГчФи</code>шп╗хПЦхИ░ш╛╛чЪДцХ░цНоуАВхжВцЮЬхЗ║чО░х╝Вх╕╕я╝Мх░▒ш┐ФхЫЮф╕Аф╕кх╝Вх╕╕щФЩшппуАВ</p> <hr> <p>ш┐ЩщЗМцПТхПещвШхдЦшпЭя╝Мхдзхо╢шзЙф╕НшзЙх╛Ч<code>щШ╗хбЮIOцибхЮЛ</code>хЬичФЯц┤╗ф╕нчЪДф╛ЛхнРх░▒хГПцШпцИСф╗мхЬищгЯхаВцОТщШЯцЙУщенуАВф╜ашЗкх╖▒щЬАшжБцОТщШЯхО╗цЙУщенхРМцЧ╢цЙУщенх╕ИхВЕхЬищЕНшПЬчЪДш┐ЗчиЛф╕нф╜ащЬАшжБчнЙх╛ЕуАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190942411.png" alt="хЫ╛чЙЗ">щШ╗хбЮIO.png</p> <p><code>IOхдЪш╖пхдНчФицибхЮЛ</code>х░▒хГПцШпцИСф╗мхЬищенх║ЧщЧихПгцОТщШЯчнЙх╛ЕхПлхП╖уАВхПлхП╖хЩих░▒хе╜цпФ<code>select,poll,epoll</code>хПпф╗еч╗Яф╕АчобчРЖхЕищГищб╛ховчЪД<code>хРГщенх░▒ч╗к</code>ф║Лф╗╢я╝МховцИ╖хе╜цпФцШп<code>socket</code>ш┐ЮцОея╝Мш░БхПпф╗ехО╗хРГщенф║Жя╝МхПлхП╖хЩих░▒щАЪчЯеш░БуАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190942444.png" alt="хЫ╛чЙЗ">IOхдЪш╖пхдНчФи.png</p> <h3 id="х╝Вцнеio-aio"><a href="#х╝Вцнеio-aio" class="header-anchor">#</a> х╝ВцнеIOя╝ИAIOя╝Й</h3> <p>ф╗еф╕Кф╗Лч╗НчЪДхЫЫчзН<code>IOцибхЮЛ</code>хЭЗф╕║<code>хРМцнеIO</code>я╝МхоГф╗мщГ╜ф╝ЪщШ╗хбЮхЬичммф║МщШ╢цо╡<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>уАВ</p> <p>щАЪш┐ЗхЬихЙНш╛╣х░ПшКВуАКхРМцнеф╕Ох╝ВцнеуАЛф╕нчЪДф╗Лч╗Ня╝МчЫ╕ф┐бхдзхо╢х╛Ихо╣цШУх░▒ф╝ЪчРЖшзг<code>х╝ВцнеIOцибхЮЛ</code>я╝МхЬи<code>х╝ВцнеIOцибхЮЛ</code>ф╕Ля╝МIOцУНф╜ЬхЬи<code>цХ░цНохЗЖхдЗщШ╢цо╡</code>хТМ<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>хЭЗцШпчФ▒хЖЕца╕цЭехоМцИРя╝Мф╕Нф╝Ъхп╣х║ФчФичиЛх║ПщАацИРф╗╗ф╜ХщШ╗хбЮуАВх║ФчФиш┐ЫчиЛхПкщЬАшжБхЬи<code>цМЗхоЪчЪДцХ░ч╗Д</code>ф╕нх╝ХчФицХ░цНохН│хПпуАВ</p> <p><code>х╝Вцне IO</code> ф╕О<code>ф┐бхП╖щй▒хКи IO</code> чЪДф╕╗шжБхМ║хИлхЬиф║Оя╝Ъ<code>ф┐бхП╖щй▒хКи IO</code> чФ▒хЖЕца╕щАЪчЯеф╜ХцЧ╢хПпф╗е<code>х╝АхзЛф╕Аф╕к IO цУНф╜Ь</code>я╝МшАМ<code>х╝Вцне IO</code>чФ▒хЖЕца╕щАЪчЯе <code>IO цУНф╜Ьф╜ХцЧ╢х╖▓ч╗ПхоМцИР</code>уАВ</p> <p>ф╕╛ф╕кчФЯц┤╗ф╕нчЪДф╛ЛхнРя╝Ъ<code>х╝ВцнеIOцибхЮЛ</code>х░▒хГПцИСф╗мхО╗ф╕Аф╕кщлШцбгщенх║ЧщЗМчЪДхМЕщЧ┤хРГщеня╝МцИСф╗мхПкщЬАшжБхЭРхЬихМЕщЧ┤щЗМщЭвя╝МчВ╣хоМщдРя╝И<code>ч▒╗цпФх╝ВцнеIOш░ГчФи</code>я╝Йф╣ЛхРОя╝МцИСф╗мх░▒ф╗Аф╣Иф╣Яф╕НщЬАшжБчобя╝МшпехЦЭщЕТхЦЭщЕТя╝МшпешБКхдйшБКхдйя╝МщенщдРхБЪхе╜хРОцЬНхКбхСШя╝И<code>ч▒╗цпФхЖЕца╕</code>я╝Йф╝ЪшЗкх╖▒ч╗ЩцИСф╗мщАБхИ░хМЕщЧ┤я╝И<code>ч▒╗цпФчФицИ╖чй║щЧ┤</code>я╝ЙцЭеуАВцХ┤ф╕кш┐ЗчиЛц▓бцЬЙф╗╗ф╜ХщШ╗хбЮуАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190942662.png" alt="хЫ╛чЙЗ">х╝ВцнеIO.png</p> <p><code>х╝ВцнеIO</code>чЪДч│╗ч╗Яш░ГчФищЬАшжБцУНф╜Ьч│╗ч╗ЯхЖЕца╕цЭецФпцМБя╝МчЫохЙНхПкцЬЙ<code>Window</code>ф╕нчЪД<code>IOCP</code>хоЮчО░ф║ЖщЭЮх╕╕цИРчЖЯчЪД<code>х╝ВцнеIOцЬ║хИ╢</code>уАВ</p> <p>шАМ<code>Linux</code>ч│╗ч╗Яхп╣<code>х╝ВцнеIOцЬ║хИ╢</code>хоЮчО░чЪДф╕НхдЯцИРчЖЯя╝Мф╕Фф╕О<code>NIO</code>чЪДцАзшГ╜чЫ╕цпФцПРхНЗф╣Яф╕НцШОцШ╛уАВ</p> <blockquote><p>ф╜ЖLinux kernel хЬи5.1чЙИцЬмчФ▒FacebookчЪДхдзчеЮJens Axboeх╝ХхЕеф║ЖцЦ░чЪДх╝ВцнеIOх║У<code>io_uring</code> цФ╣хЦДф║ЖхОЯцЭеLinux native AIOчЪДф╕Аф║ЫцАзшГ╜щЧощвШуАВцАзшГ╜чЫ╕цпФ<code>Epoll</code>ф╗ехПКф╣ЛхЙНхОЯчФЯчЪД<code>AIO</code>цПРщлШф║Жф╕Нх░Ся╝МхА╝х╛ЧхЕ│ц│иуАВ</p></blockquote> <p>хЖНхКаф╕К<code>ф┐бхП╖щй▒хКиIOцибхЮЛ</code>ф╕НщАВчФи<code>TCPхНПшоо</code>я╝МцЙАф╗ечЫохЙНхдзщГихИЖщЗЗчФичЪДш┐ШцШп<code>IOхдЪш╖пхдНчФицибхЮЛ</code>уАВ</p> <h2 id="io-ч║┐чиЛцибхЮЛ"><a href="#io-ч║┐чиЛцибхЮЛ" class="header-anchor">#</a> IO ч║┐чиЛцибхЮЛ</h2> <p>хЬихЙНш╛╣хЖЕхо╣чЪДф╗Лч╗Нф╕ня╝МцИСф╗мшпжш┐░ф║Жч╜Сч╗ЬцХ░цНохМЕчЪДцОецФ╢хТМхПСщАБш┐ЗчиЛя╝Мх╣╢щАЪш┐Зф╗Лч╗Н5чзН<code>IOцибхЮЛ</code>ф║Жшзгф║ЖхЖЕца╕цШпхжВф╜Хшп╗хПЦч╜Сч╗ЬцХ░цНох╣╢щАЪчЯеч╗ЩчФицИ╖ч║┐чиЛчЪДуАВ</p> <p>хЙНш╛╣чЪДхЖЕхо╣щГ╜цШпф╗е<code>хЖЕца╕чй║щЧ┤</code>чЪДшзЖшзТцЭехЙЦцЮРч╜Сч╗ЬцХ░цНочЪДцФ╢хПСцибхЮЛя╝МцЬмх░ПшКВцИСф╗мчлЩхЬи<code>чФицИ╖чй║щЧ┤</code>чЪДшзЖшзТцЭечЬЛф╕ЛхжВцЮЬхп╣ч╜Сч╗ЬцХ░цНош┐ЫшбМцФ╢хПСуАВ</p> <p>чЫ╕хп╣<code>хЖЕца╕</code>цЭешо▓я╝М<code>чФицИ╖чй║щЧ┤чЪДIOч║┐чиЛцибхЮЛ</code>чЫ╕хп╣х░▒чоАхНХф╕Аф║ЫуАВш┐Щф║Ы<code>чФицИ╖чй║щЧ┤</code>чЪД<code>IOч║┐чиЛцибхЮЛ</code>щГ╜цШпхЬишоишо║х╜УхдЪч║┐чиЛф╕Аш╡╖щЕНхРИх╖еф╜ЬцЧ╢ш░Бш┤Яш┤гцОецФ╢ш┐ЮцОея╝Мш░Бш┤Яш┤гхУНх║ФIO шп╗хЖЩуАБш░Бш┤Яш┤гшобчоЧуАБш░Бш┤Яш┤гхПСщАБхТМцОецФ╢я╝Мф╗Еф╗ЕцШпчФицИ╖IOч║┐чиЛчЪДф╕НхРМхИЖх╖ецибх╝Пч╜вф║ЖуАВ</p> <h3 id="reactor"><a href="#reactor" class="header-anchor">#</a> Reactor</h3> <p><code>Reactor</code>цШпхИйчФи<code>NIO</code>хп╣<code>IOч║┐чиЛ</code>ш┐ЫшбМф╕НхРМчЪДхИЖх╖ея╝Ъ</p> <ul><li>ф╜┐чФихЙНш╛╣цИСф╗мцПРхИ░чЪД<code>IOхдЪш╖пхдНчФицибхЮЛ</code>цпФхжВ<code>select,poll,epoll,kqueue</code>,ш┐ЫшбМIOф║Лф╗╢чЪДц│ихЖМхТМчЫСхРмуАВ</li> <li>х░ЖчЫСхРмхИ░<code>х░▒ч╗кчЪДIOф║Лф╗╢</code>хИЖхПС<code>dispatch</code>хИ░хРДф╕кхЕ╖ф╜УчЪДхдДчРЖ<code>Handler</code>ф╕нш┐ЫшбМчЫ╕х║ФчЪД<code>IOф║Лф╗╢хдДчРЖ</code>уАВ</li></ul> <p>щАЪш┐З<code>IOхдЪш╖пхдНчФицКАцЬп</code>х░▒хПпф╗еф╕НцЦнчЪДчЫСхРм<code>IOф║Лф╗╢</code>я╝Мф╕НцЦнчЪДхИЖхПС<code>dispatch</code>я╝Мх░▒хГПф╕Аф╕к<code>хПНх║ФхаЖ</code>ф╕Аца╖я╝МчЬЛш╡╖цЭехГПф╕НцЦнчЪДф║зчФЯ<code>IOф║Лф╗╢</code>я╝МхЫацндцИСф╗мчз░ш┐ЩчзНцибх╝Пф╕║<code>Reactor</code>цибхЮЛуАВ</p> <p>ф╕ЛщЭвцИСф╗мцЭечЬЛф╕Л<code>ReactorцибхЮЛ</code>чЪДф╕ЙчзНхИЖч▒╗я╝Ъ</p> <h4 id="хНХreactorхНХч║┐чиЛ"><a href="#хНХreactorхНХч║┐чиЛ" class="header-anchor">#</a> хНХReactorхНХч║┐чиЛ</h4> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190944960.png" alt="хЫ╛чЙЗ">хНХReactorхНХч║┐чиЛ</p> <p><code>ReactorцибхЮЛ</code>цШпф╛Эш╡Ц<code>IOхдЪш╖пхдНчФицКАцЬп</code>хоЮчО░чЫСхРм<code>IOф║Лф╗╢</code>я╝Мф╗ОшАМц║Рц║Рф╕НцЦнчЪДф║зчФЯ<code>IOх░▒ч╗кф║Лф╗╢</code>я╝МхЬиLinuxч│╗ч╗Яф╕ЛцИСф╗мф╜┐чФи<code>epoll</code>цЭеш┐ЫшбМ<code>IOхдЪш╖пхдНчФи</code>я╝МцИСф╗мф╗еLinuxч│╗ч╗Яф╕║ф╛Ля╝Ъ</p> <ul><li>хНХ<code>Reactor</code>цДПхС│чЭАхПкцЬЙф╕Аф╕к<code>epoll</code>хп╣ш▒бя╝МчФицЭечЫСхРмцЙАцЬЙчЪДф║Лф╗╢я╝МцпФхжВ<code>ш┐ЮцОеф║Лф╗╢</code>я╝М<code>шп╗хЖЩф║Лф╗╢</code>уАВ</li> <li><code>хНХч║┐чиЛ</code>цДПхС│чЭАхПкцЬЙф╕Аф╕кч║┐чиЛцЭецЙзшбМ<code>epoll_wait</code>шО╖хПЦ<code>IOх░▒ч╗к</code>чЪД<code>Socket</code>я╝МчД╢хРОхп╣ш┐Щф║Ых░▒ч╗кчЪД<code>Socket</code>цЙзшбМшп╗хЖЩя╝Мф╗ехПКхРОш╛╣чЪДф╕ЪхКбхдДчРЖф╣Яф╛ЭчД╢цШпш┐Щф╕кч║┐чиЛуАВ</li></ul> <p><code>хНХReactorхНХч║┐чиЛ</code>цибхЮЛх░▒хе╜цпФцИСф╗мх╝Аф║Жф╕Аф╕кх╛Их░Пх╛Их░ПчЪДх░ПщенщжЖя╝Мф╜Ьф╕║шАБцЭ┐чЪДцИСф╗мщЬАшжБф╕Аф╕кф║║х╣▓цЙАцЬЙчЪДф║ЛцГЕя╝МхМЕцЛмя╝Ъш┐ОцОещб╛ховя╝И<code>acceptф║Лф╗╢</code>я╝Йя╝Мф╕║щб╛ховф╗Лч╗НшПЬхНХчнЙх╛Ещб╛ховчВ╣шПЬ(<code>IOшп╖ц▒В</code>)я╝МхБЪшПЬя╝И<code>ф╕ЪхКбхдДчРЖ</code>я╝Йя╝Мф╕КшПЬя╝И<code>IOхУНх║Ф</code>я╝Йя╝МщАБховя╝И<code>цЦнх╝Аш┐ЮцОе</code>я╝ЙуАВ</p> <h4 id="хНХreactorхдЪч║┐чиЛ"><a href="#хНХreactorхдЪч║┐чиЛ" class="header-anchor">#</a> хНХReactorхдЪч║┐чиЛ</h4> <p>щЪПчЭАховф║║чЪДхвЮхдЪя╝И<code>х╣╢хПСшп╖ц▒В</code>я╝Йя╝МцШ╛чД╢щенщжЖщЗМчЪДф║ЛцГЕхПкцЬЙцИСф╗мф╕Аф╕кф║║х╣▓я╝И<code>хНХч║┐чиЛ</code>я╝ЙшВпхоЪцШпх┐Щф╕Нш┐ЗцЭечЪДя╝Мш┐ЩцЧ╢хАЩцИСф╗мх░▒щЬАшжБхдЪцЛЫшБШф╕Аф║ЫхСШх╖ея╝И<code>хдЪч║┐чиЛ</code>я╝ЙцЭех╕очЭАф╕Аш╡╖х╣▓ф╕Кш┐░чЪДф║ЛцГЕуАВ</p> <p>ф║ОцШпх░▒цЬЙф║Ж<code>хНХReactorхдЪч║┐чиЛ</code>цибхЮЛя╝Ъ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190944074.png" alt="хЫ╛чЙЗ">хНХReactorхдЪч║┐чиЛ</p> <ul><li>ш┐ЩчзНцибх╝Пф╕Ля╝Мф╣ЯцШпхПкцЬЙф╕Аф╕к<code>epoll</code>хп╣ш▒бцЭечЫСхРмцЙАцЬЙчЪД<code>IOф║Лф╗╢</code>я╝Мф╕Аф╕кч║┐чиЛцЭеш░ГчФи<code>epoll_wait</code>шО╖хПЦ<code>IOх░▒ч╗к</code>чЪД<code>Socket</code>уАВ</li> <li>ф╜ЖцШпх╜У<code>IOх░▒ч╗кф║Лф╗╢</code>ф║зчФЯцЧ╢я╝Мш┐Щф║Ы<code>IOф║Лф╗╢</code>хп╣х║ФхдДчРЖчЪДф╕ЪхКб<code>Handler</code>я╝МцИСф╗мцШпщАЪш┐Зч║┐чиЛц▒ацЭецЙзшбМуАВш┐Щца╖чЫ╕цпФ<code>хНХReactorхНХч║┐чиЛ</code>цибхЮЛцПРщлШф║ЖцЙзшбМцХИчОЗя╝МхЕЕхИЖхПСцМеф║ЖхдЪца╕CPUчЪДф╝ШхК┐уАВ</li></ul> <h4 id="ф╕╗ф╗ОreactorхдЪч║┐чиЛ"><a href="#ф╕╗ф╗ОreactorхдЪч║┐чиЛ" class="header-anchor">#</a> ф╕╗ф╗ОReactorхдЪч║┐чиЛ</h4> <p>хБЪф╗╗ф╜Хф║ЛцГЕщГ╜шжБхМ║хИЖ<code>ф║ЛцГЕчЪДф╝ШхЕИч║з</code>я╝МцИСф╗мх║Фшпе<code>ф╝ШхЕИщлШцХИ</code>чЪДхО╗хБЪ<code>ф╝ШхЕИч║зцЫ┤щлШ</code>чЪДф║ЛцГЕя╝МшАМф╕НцШпф╕АшВбшДСф╕НхИЖф╝ШхЕИч║зчЪДхЕищГихО╗хБЪуАВ</p> <p>х╜УцИСф╗мчЪДх░ПщенщжЖховф║║ш╢КцЭеш╢КхдЪя╝И<code>х╣╢хПСщЗПш╢КцЭеш╢Кхдз</code>я╝Йя╝МцИСф╗мх░▒щЬАшжБцЙйхдзщенх║ЧчЪДшзДцибя╝МхЬиш┐Щф╕кш┐ЗчиЛф╕нцИСф╗мхПСчО░я╝М<code>ш┐ОцОеховф║║</code>цШпщенх║ЧцЬАщЗНшжБчЪДх╖еф╜Ья╝МцИСф╗мшжБхЕИцККховф║║ш┐ОцОеш┐ЫцЭея╝Мф╕НшГ╜шойховф║║ф╕АчЬЛф║║хдЪх░▒ш╡░цОЙя╝МхПкшжБховф║║ш┐ЫцЭеф║Жя╝МхУкцАХшПЬхБЪчЪДцЕвф╕АчВ╣ф╣Яц▓бхЕ│ч│╗уАВ</p> <p>ф║ОцШпя╝М<code>ф╕╗ф╗ОReactorхдЪч║┐чиЛ</code>цибхЮЛх░▒ф║зчФЯф║Жя╝Ъ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190944188.png" alt="хЫ╛чЙЗ">ф╕╗ф╗ОReactorхдЪч║┐чиЛ</p> <ul><li>цИСф╗мчФ▒хОЯцЭечЪД<code>хНХReactor</code>хПШф╕║ф║Ж<code>хдЪReactor</code>уАВ<code>ф╕╗Reactor</code>чФицЭеф╝ШхЕИ<code>ф╕УщЧи</code>хБЪф╝ШхЕИч║зцЬАщлШчЪДф║ЛцГЕя╝Мф╣Ях░▒цШпш┐ОцОеховф║║я╝И<code>хдДчРЖш┐ЮцОеф║Лф╗╢</code>я╝Йя╝Мхп╣х║ФчЪДхдДчРЖ<code>Handler</code>х░▒цШпхЫ╛ф╕нчЪД<code>acceptor</code>уАВ</li> <li>х╜УхИЫх╗║хе╜ш┐ЮцОея╝Мх╗║члЛхе╜хп╣х║ФчЪД<code>socket</code>хРОя╝МхЬи<code>acceptor</code>ф╕нх░ЖшжБчЫСхРмчЪД<code>readф║Лф╗╢</code>ц│ихЖМхИ░<code>ф╗ОReactor</code>ф╕ня╝МчФ▒<code>ф╗ОReactor</code>цЭечЫСхРм<code>socket</code>ф╕КчЪД<code>шп╗хЖЩ</code>ф║Лф╗╢уАВ</li> <li>цЬАч╗Их░Жшп╗хЖЩчЪДф╕ЪхКбщА╗ш╛СхдДчРЖф║дч╗Щч║┐чиЛц▒ахдДчРЖуАВ</li></ul> <blockquote><p><strong>ц│ицДП</strong>я╝Ъш┐ЩщЗМхРС<code>ф╗ОReactor</code>ц│ихЖМчЪДхПкцШп<code>readф║Лф╗╢</code>я╝Мх╣╢ц▓бцЬЙц│ихЖМ<code>writeф║Лф╗╢</code>я╝МхЫаф╕║<code>readф║Лф╗╢</code>цШпчФ▒<code>epollхЖЕца╕</code>шзжхПСчЪДя╝МшАМ<code>writeф║Лф╗╢</code>хИЩцШпчФ▒чФицИ╖ф╕ЪхКбч║┐чиЛшзжхПСчЪДя╝И<code>ф╗Аф╣ИцЧ╢хАЩхПСщАБцХ░цНоцШпчФ▒хЕ╖ф╜Уф╕ЪхКбч║┐чиЛхЖ│хоЪчЪД</code>я╝Йя╝МцЙАф╗е<code>writeф║Лф╗╢</code>чРЖх║ФцШпчФ▒<code>чФицИ╖ф╕ЪхКбч║┐чиЛ</code>хО╗ц│ихЖМуАВ</p></blockquote> <blockquote><p>чФицИ╖ч║┐чиЛц│ихЖМ<code>writeф║Лф╗╢</code>чЪДцЧ╢цЬ║цШпхПкцЬЙх╜УчФицИ╖хПСщАБчЪДцХ░цНо<code>цЧац│Хф╕АцмбцАз</code>хЕищГихЖЩхЕе<code>buffer</code>цЧ╢я╝МцЙНф╝ЪхО╗ц│ихЖМ<code>writeф║Лф╗╢</code>я╝МчнЙх╛Е<code>bufferщЗНцЦ░хПпхЖЩ</code>цЧ╢я╝Мч╗зч╗нхЖЩхЕехЙйф╕ЛчЪДхПСщАБцХ░цНоуАБхжВцЮЬчФицИ╖ч║┐чиЛхПпф╗еф╕АшВбшДСчЪДх░ЖхПСщАБцХ░цНохЕищГихЖЩхЕе<code>buffer</code>я╝МщВгф╣Иф╣Ях░▒цЧащЬАц│ихЖМ<code>writeф║Лф╗╢</code>хИ░<code>ф╗ОReactor</code>ф╕нуАВ</p></blockquote> <p><code>ф╕╗ф╗ОReactorхдЪч║┐чиЛ</code>цибхЮЛцШпчО░хЬихдзщГихИЖф╕╗ц╡Бч╜Сч╗ЬцбЖцЮ╢ф╕нщЗЗчФичЪДф╕АчзН<code>IOч║┐чиЛцибхЮЛ</code>уАВцИСф╗мцЬмч│╗хИЧчЪДф╕╗щвШ<code>Netty</code>х░▒цШпчФичЪДш┐ЩчзНцибхЮЛуАВ</p> <h3 id="proactor"><a href="#proactor" class="header-anchor">#</a> Proactor</h3> <p><code>Proactor</code>цШпхЯ║ф║О<code>AIO</code>хп╣<code>IOч║┐чиЛ</code>ш┐ЫшбМхИЖх╖ечЪДф╕АчзНцибхЮЛуАВхЙНш╛╣цИСф╗мф╗Лч╗Нф║Ж<code>х╝ВцнеIOцибхЮЛ</code>я╝МхоГцШпцУНф╜Ьч│╗ч╗ЯхЖЕца╕цФпцМБчЪДф╕АчзНхЕих╝Вцнеч╝ЦчиЛцибхЮЛя╝МхЬи<code>цХ░цНохЗЖхдЗщШ╢цо╡</code>хТМ<code>цХ░цНоцЛ╖ш┤ЭщШ╢цо╡</code>хЕичиЛцЧащШ╗хбЮуАВ</p> <p><code>ProactorIOч║┐чиЛцибхЮЛ</code>х░Ж<code>IOф║Лф╗╢чЪДчЫСхРм</code>я╝М<code>IOцУНф╜ЬчЪДцЙзшбМ</code>я╝М<code>IOч╗УцЮЬчЪДdispatch</code>ч╗Яч╗Яф║дч╗Щ<code>хЖЕца╕</code>цЭехБЪуАВ</p> <p><img src="https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409190944822.png" alt="хЫ╛чЙЗ">proactor.png</p> <p><strong><code>ProactorцибхЮЛ</code>ч╗Дф╗╢ф╗Лч╗Ня╝Ъ</strong></p> <ul><li><code>completion handler</code> ф╕║чФицИ╖чиЛх║ПхоЪф╣ЙчЪДх╝ВцнеIOцУНф╜ЬхЫЮш░ГхЗ╜цХ░я╝МхЬих╝ВцнеIOцУНф╜ЬхоМцИРцЧ╢ф╝ЪшвлхЖЕца╕хЫЮш░Гх╣╢щАЪчЯеIOч╗УцЮЬуАВ</li> <li><code>Completion Event Queue</code> х╝ВцнеIOцУНф╜ЬхоМцИРхРОя╝Мф╝Ъф║зчФЯхп╣х║ФчЪД<code>IOхоМцИРф║Лф╗╢</code>я╝Мх░Ж<code>IOхоМцИРф║Лф╗╢</code>цФ╛хЕешпещШЯхИЧф╕нуАВ</li> <li><code>Asynchronous Operation Processor</code> ш┤Яш┤г<code>х╝ВцнеIO</code>чЪДцЙзшбМуАВцЙзшбМхоМцИРхРОф║зчФЯ<code>IOхоМцИРф║Лф╗╢</code>цФ╛хЕе<code>Completion Event Queue</code> щШЯхИЧф╕нуАВ</li> <li><code>Proactor</code> цШпф╕Аф╕кф║Лф╗╢х╛кчОпц┤╛хПСхЩия╝Мш┤Яш┤гф╗О<code>Completion Event Queue</code>ф╕ншО╖хПЦ<code>IOхоМцИРф║Лф╗╢</code>я╝Мх╣╢хЫЮш░Гф╕О<code>IOхоМцИРф║Лф╗╢</code>хЕ│шБФчЪД<code>completion handler</code>уАВ</li> <li><code>Initiator</code> хИЭхзЛхМЦх╝ВцнецУНф╜Ья╝И<code>asynchronous operation</code>я╝Йх╣╢щАЪш┐З<code>Asynchronous Operation Processor</code>х░Ж<code>completion handler</code>хТМ<code>proactor</code>ц│ихЖМхИ░хЖЕца╕уАВ</li></ul> <p><strong><code>ProactorцибхЮЛ</code>цЙзшбМш┐ЗчиЛя╝Ъ</strong></p> <ul><li>чФицИ╖ч║┐чиЛхПСш╡╖<code>aio_read</code>я╝Мх╣╢хСКшпЙ<code>хЖЕца╕</code>чФицИ╖чй║щЧ┤ф╕нчЪДшп╗ч╝УхЖ▓хМ║хЬ░хЭАя╝Мф╗еф╛┐<code>хЖЕца╕</code>хоМцИР<code>IOцУНф╜Ь</code>х░Жч╗УцЮЬцФ╛хЕе<code>чФицИ╖чй║щЧ┤</code>чЪДшп╗ч╝УхЖ▓хМ║я╝МчФицИ╖ч║┐чиЛчЫ┤цОехПпф╗ешп╗хПЦч╗УцЮЬя╝И<code>цЧаф╗╗ф╜ХщШ╗хбЮ</code>я╝ЙуАВ</li> <li><code>Initiator</code> хИЭхзЛхМЦ<code>aio_read</code>х╝Вцнешп╗хПЦцУНф╜Ья╝И<code>asynchronous operation</code>я╝Й,х╣╢х░Ж<code>completion handler</code>ц│ихЖМхИ░хЖЕца╕уАВ</li></ul> <blockquote><p>хЬи<code>Proactor</code>ф╕нцИСф╗мхЕ│х┐ГчЪД<code>IOхоМцИРф║Лф╗╢</code>я╝ЪхЖЕца╕х╖▓ч╗Пх╕оцИСф╗мшп╗хе╜цХ░цНох╣╢цФ╛хЕецИСф╗мцМЗхоЪчЪДшп╗ч╝УхЖ▓хМ║я╝МчФицИ╖ч║┐чиЛхПпф╗ечЫ┤цОешп╗хПЦуАВхЬи<code>Reactor</code>ф╕нцИСф╗мхЕ│х┐ГчЪДцШп<code>IOх░▒ч╗кф║Лф╗╢</code>я╝ЪцХ░цНох╖▓ч╗ПхИ░цЭея╝Мф╜ЖцШпщЬАшжБчФицИ╖ч║┐чиЛшЗкх╖▒хО╗шп╗хПЦуАВ</p></blockquote> <ul><li>цндцЧ╢чФицИ╖ч║┐чиЛх░▒хПпф╗ехБЪхЕ╢ф╗Цф║ЛцГЕф║Жя╝МцЧащЬАчнЙх╛ЕIOч╗УцЮЬуАВшАМхЖЕца╕ф╕ОцндхРМцЧ╢х╝АхзЛх╝ВцнецЙзшбМIOцУНф╜ЬуАВх╜У<code>IOцУНф╜Ь</code>хоМцИРцЧ╢ф╝Ъф║зчФЯф╕Аф╕к<code>completion event</code>ф║Лф╗╢я╝Мх░Жш┐Щф╕к<code>IOхоМцИРф║Лф╗╢</code>цФ╛хЕе<code>completion event queue</code>ф╕нуАВ</li> <li><code>Proactor</code>ф╗О<code>completion event queue</code>ф╕нхПЦхЗ║<code>completion event</code>я╝Мх╣╢хЫЮш░Гф╕О<code>IOхоМцИРф║Лф╗╢</code>хЕ│шБФчЪД<code>completion handler</code>уАВ</li> <li>хЬи<code>completion handler</code>ф╕нхоМцИРф╕ЪхКбщА╗ш╛СхдДчРЖуАВ</li></ul> <h3 id="reactorф╕Оproactorхп╣цпФ"><a href="#reactorф╕Оproactorхп╣цпФ" class="header-anchor">#</a> Reactorф╕ОProactorхп╣цпФ</h3> <p><code>Reactor</code>цШпхЯ║ф║О<code>NIO</code>хоЮчО░чЪДф╕АчзН<code>IOч║┐чиЛцибхЮЛ</code>я╝М<code>Proactor</code>цШпхЯ║ф║О<code>AIO</code>хоЮчО░чЪД<code>IOч║┐чиЛцибхЮЛ</code>уАВ</p> <p><code>Reactor</code>хЕ│х┐ГчЪДцШп<code>IOх░▒ч╗кф║Лф╗╢</code>я╝М<code>Proactor</code>хЕ│х┐ГчЪДцШп<code>IOхоМцИРф║Лф╗╢</code>уАВ</p> <p>хЬи<code>Proactor</code>ф╕ня╝МчФицИ╖чиЛх║ПщЬАшжБхРСхЖЕца╕ф╝ащАТ<code>чФицИ╖чй║щЧ┤чЪДшп╗ч╝УхЖ▓хМ║хЬ░хЭА</code>уАВ<code>Reactor</code>хИЩф╕НщЬАшжБуАВш┐Щф╣Ях░▒хп╝шЗ┤ф║ЖхЬи<code>Proactor</code>ф╕нцпПф╕кх╣╢хПСцУНф╜ЬщГ╜шжБц▒ВцЬЙчЛмчлЛчЪДч╝УхнШхМ║я╝МхЬихЖЕхнШф╕КцЬЙф╕АхоЪчЪДх╝АщФАуАВ</p> <p><code>Proactor</code> чЪДхоЮчО░щА╗ш╛СхдНцЭВя╝Мч╝ЦчаБцИРцЬмш╛Г <code>Reactor</code>шжБщлШх╛ИхдЪуАВ</p> <p><code>Proactor</code> хЬихдДчРЖ<code>щлШшАЧцЧ╢ IO</code>цЧ╢чЪДцАзшГ╜шжБщлШф║О <code>Reactor</code>я╝Мф╜Жхп╣ф║О<code>ф╜ОшАЧцЧ╢ IO</code>чЪДцЙзшбМцХИчОЗцПРхНЗ<code>х╣╢ф╕НцШОцШ╛</code>уАВ</p> <h2 id="nettyчЪДioцибхЮЛ"><a href="#nettyчЪДioцибхЮЛ" class="header-anchor">#</a> NettyчЪДIOцибхЮЛ</h2> <p>хЬицИСф╗мф╗Лч╗НхоМ<code>ч╜Сч╗ЬцХ░цНохМЕхЬихЖЕца╕ф╕нчЪДцФ╢хПСш┐ЗчиЛ</code>ф╗ехПКф║ФчзН<code>IOцибхЮЛ</code>хТМф╕дчзН<code>IOч║┐чиЛцибхЮЛ</code>хРОя╝МчО░хЬицИСф╗мцЭечЬЛф╕Л<code>netty</code>ф╕нчЪДIOцибхЮЛцШпф╗Аф╣Ица╖чЪДуАВ</p> <p>хЬицИСф╗мф╗Лч╗Н<code>Reactor IOч║┐чиЛцибхЮЛ</code>чЪДцЧ╢хАЩцПРхИ░цЬЙф╕ЙчзН<code>ReactorцибхЮЛ</code>я╝Ъ<code>хНХReactorхНХч║┐чиЛ</code>я╝М<code>хНХReactorхдЪч║┐чиЛ</code>я╝М<code>ф╕╗ф╗ОReactorхдЪч║┐чиЛ</code>уАВ</p> <p>ш┐Щф╕ЙчзН<code>ReactorцибхЮЛ</code>хЬи<code>netty</code>ф╕нщГ╜цШпцФпцМБчЪДя╝Мф╜ЖцШпцИСф╗мх╕╕чФичЪДцШп<code>ф╕╗ф╗ОReactorхдЪч║┐чиЛцибхЮЛ</code>уАВ</p> <p>шАМцИСф╗мф╣ЛхЙНф╗Лч╗НчЪДф╕ЙчзН<code>Reactor</code>хПкцШпф╕АчзНцибхЮЛя╝МцШпф╕АчзНшо╛шобцАЭцГ│уАВхоЮщЩЕф╕КхРДчзНч╜Сч╗ЬцбЖцЮ╢хЬихоЮчО░ф╕нх╣╢ф╕НцШпф╕еца╝цМЙчЕзцибхЮЛцЭехоЮчО░чЪДя╝Мф╝ЪцЬЙф╕Аф║Ых░ПчЪДф╕НхРМя╝Мф╜Жхдзф╜Ушо╛шобцАЭцГ│ф╕КцШпф╕Аца╖чЪДуАВ</p> <p>ф╕ЛщЭвцИСф╗мцЭечЬЛф╕Л<code>netty</code>ф╕нчЪД<code>ф╕╗ф╗ОReactorхдЪч║┐чиЛцибхЮЛ</code>цШпф╗Аф╣Ица╖хнРчЪДя╝Я</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEqBHAhkKJCkVgiaazsXibAeyzHXtCy8fB3JPwWlq0LL8kWQG6OVwFYDgA/640?wx_fmt=png&amp;tp=wxpic&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="хЫ╛чЙЗ"></p> <ul><li><code>Reactor</code>хЬи<code>netty</code>ф╕нцШпф╗е<code>group</code>чЪДх╜вх╝ПхЗ║чО░чЪДя╝М<code>netty</code>ф╕нх░Ж<code>Reactor</code>хИЖф╕║ф╕дч╗Дя╝Мф╕Ач╗ДцШп<code>MainReactorGroup</code>ф╣Ях░▒цШпцИСф╗мхЬич╝ЦчаБф╕нх╕╕х╕╕чЬЛхИ░чЪД<code>EventLoopGroup bossGroup</code>,хПжф╕Ач╗ДцШп<code>SubReactorGroup</code>ф╣Ях░▒цШпцИСф╗мхЬич╝ЦчаБф╕нх╕╕х╕╕чЬЛхИ░чЪД<code>EventLoopGroup workerGroup</code>уАВ</li> <li><code>MainReactorGroup</code>ф╕нщАЪх╕╕хПкцЬЙф╕Аф╕к<code>Reactor</code>я╝Мф╕УщЧиш┤Яш┤гхБЪцЬАщЗНшжБчЪДф║ЛцГЕя╝Мф╣Ях░▒цШпчЫСхРмш┐ЮцОе<code>accept</code>ф║Лф╗╢уАВх╜УцЬЙш┐ЮцОеф║Лф╗╢ф║зчФЯцЧ╢я╝МхЬихп╣х║ФчЪДхдДчРЖ<code>handler acceptor</code>ф╕нхИЫх╗║хИЭхзЛхМЦчЫ╕х║ФчЪД<code>NioSocketChannel</code>я╝Иф╗гшбиф╕Аф╕к<code>Socketш┐ЮцОе</code>я╝ЙуАВчД╢хРОф╗е<code>ш┤Яш╜╜хЭЗшбб</code>чЪДцЦ╣х╝ПхЬи<code>SubReactorGroup</code>ф╕нщАЙхПЦф╕Аф╕к<code>Reactor</code>я╝Мц│ихЖМф╕КхО╗я╝МчЫСхРм<code>Readф║Лф╗╢</code>уАВ</li></ul> <blockquote><p><code>MainReactorGroup</code>ф╕нхПкцЬЙф╕Аф╕к<code>Reactor</code>чЪДхОЯхЫацШпя╝МщАЪх╕╕цИСф╗мцЬНхКбчлпчиЛх║ПхПкф╝Ъ<code>ч╗СхоЪчЫСхРм</code>ф╕Аф╕кчлпхПгя╝МхжВцЮЬшжБ<code>ч╗СхоЪчЫСхРм</code>хдЪф╕кчлпхПгя╝Мх░▒ф╝ЪщЕНч╜охдЪф╕к<code>Reactor</code>уАВ</p></blockquote> <ul><li><code>SubReactorGroup</code>ф╕нцЬЙхдЪф╕к<code>Reactor</code>я╝МхЕ╖ф╜У<code>Reactor</code>чЪДф╕кцХ░хПпф╗ечФ▒ч│╗ч╗ЯхПВцХ░ <code>-D io.netty.eventLoopThreads</code>цМЗхоЪуАВщ╗ШшодчЪД<code>Reactor</code>чЪДф╕кцХ░ф╕║<code>CPUца╕цХ░ * 2</code>уАВ<code>SubReactorGroup</code>ф╕нчЪД<code>Reactor</code>ф╕╗шжБш┤Яш┤гчЫСхРм<code>шп╗хЖЩф║Лф╗╢</code>я╝МцпПф╕Аф╕к<code>Reactor</code>ш┤Яш┤гчЫСхРмф╕Ач╗Д<code>socketш┐ЮцОе</code>уАВх░ЖхЕищЗПчЪДш┐ЮцОе<code>хИЖцСК</code>хЬихдЪф╕к<code>Reactor</code>ф╕нуАВ</li> <li>ф╕Аф╕к<code>Reactor</code>хИЖщЕНф╕Аф╕к<code>IOч║┐чиЛ</code>я╝Мш┐Щф╕к<code>IOч║┐чиЛ</code>ш┤Яш┤гф╗О<code>Reactor</code>ф╕ншО╖хПЦ<code>IOх░▒ч╗кф║Лф╗╢</code>я╝МцЙзшбМ<code>IOш░ГчФишО╖хПЦIOцХ░цНо</code>я╝МцЙзшбМ<code>PipeLine</code>уАВ</li></ul> <blockquote><p><code>Socketш┐ЮцОе</code>хЬихИЫх╗║хРОх░▒швл<code>хЫ║хоЪчЪДхИЖщЕН</code>ч╗Щф╕Аф╕к<code>Reactor</code>я╝МцЙАф╗еф╕Аф╕к<code>Socketш┐ЮцОе</code>ф╣ЯхПкф╝Ъшвлф╕Аф╕кхЫ║хоЪчЪД<code>IOч║┐чиЛ</code>цЙзшбМя╝МцпПф╕к<code>Socketш┐ЮцОе</code>хИЖщЕНф╕Аф╕кчЛмчлЛчЪД<code>PipeLine</code>хоЮф╛Ля╝МчФицЭеч╝ЦцОТш┐Щф╕к<code>Socketш┐ЮцОе</code>ф╕КчЪД<code>IOхдДчРЖщА╗ш╛С</code>уАВш┐ЩчзН<code>цЧащФБф╕▓шбМхМЦ</code>чЪДшо╛шобчЪДчЫочЪДцШпф╕║ф║ЖщШ▓цнвхдЪч║┐чиЛх╣╢хПСцЙзшбМхРМф╕Аф╕кsocketш┐ЮцОеф╕КчЪД<code>IOщА╗ш╛СхдДчРЖ</code>я╝МщШ▓цнвхЗ║чО░<code>ч║┐чиЛхоЙхЕищЧощвШ</code>уАВхРМцЧ╢ф╜┐ч│╗ч╗ЯхРЮхРРщЗПш╛╛хИ░цЬАхдзхМЦ</p></blockquote> <blockquote><p>чФ▒ф║ОцпПф╕к<code>Reactor</code>ф╕нхПкцЬЙф╕Аф╕к<code>IOч║┐чиЛ</code>я╝Мш┐Щф╕к<code>IOч║┐чиЛ</code>цЧвшжБцЙзшбМ<code>IOц┤╗ш╖ГSocketш┐ЮцОе</code>хп╣х║ФчЪД<code>PipeLine</code>ф╕нчЪД<code>ChannelHandler</code>я╝МхПИшжБф╗О<code>Reactor</code>ф╕ншО╖хПЦ<code>IOх░▒ч╗кф║Лф╗╢</code>я╝МцЙзшбМ<code>IOш░ГчФи</code>уАВцЙАф╗е<code>PipeLine</code>ф╕н<code>ChannelHandler</code>ф╕нцЙзшбМчЪДщА╗ш╛Сф╕НшГ╜шАЧцЧ╢хдкщХ┐я╝Мх░╜щЗПх░ЖшАЧцЧ╢чЪДф╕ЪхКбщА╗ш╛СхдДчРЖцФ╛хЕехНХчЛмчЪДф╕ЪхКбч║┐чиЛц▒аф╕нхдДчРЖя╝МхРжхИЩф╝Ъх╜▒хУНхЕ╢ф╗Цш┐ЮцОечЪД<code>IOшп╗хЖЩ</code>я╝Мф╗ОшАМш┐Сф╕Ацнех╜▒хУНцХ┤ф╕кцЬНхКбчиЛх║ПчЪД<code>IOхРЮхРР</code>уАВ</p></blockquote> <ul><li>х╜У<code>IOшп╖ц▒В</code>хЬиф╕ЪхКбч║┐чиЛф╕нхоМцИРчЫ╕х║ФчЪДф╕ЪхКбщА╗ш╛СхдДчРЖхРОя╝МхЬиф╕ЪхКбч║┐чиЛф╕нхИйчФицМБцЬЙчЪД<code>ChannelHandlerContext</code>х╝ХчФих░ЖхУНх║ФцХ░цНохЬи<code>PipeLine</code>ф╕нхПНхРСф╝ацТня╝МцЬАч╗ИхЖЩхЫЮч╗ЩховцИ╖члпуАВ</li></ul> <p><code>netty</code>ф╕нчЪД<code>IOцибхЮЛ</code>цИСф╗мф╗Лч╗НхоМф║Жя╝Мф╕ЛщЭвцИСф╗мцЭечоАхНХф╗Лч╗Нф╕ЛхЬи<code>netty</code>ф╕нцШпхжВф╜ХцФпцМБхЙНш╛╣цПРхИ░чЪДф╕ЙчзН<code>ReactorцибхЮЛ</code>чЪДуАВ</p> <h3 id="щЕНч╜охНХreactorхНХч║┐чиЛ"><a href="#щЕНч╜охНХreactorхНХч║┐чиЛ" class="header-anchor">#</a> щЕНч╜охНХReactorхНХч║┐чиЛ</h3> <div class="language-Java extra-class"><pre class="language-java"><code><span class="token class-name">EventLoopGroup</span> eventGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ServerBootstrap</span> serverBootstrap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerBootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
serverBootstrap<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span>eventGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="щЕНч╜охдЪreactorч║┐чиЛ"><a href="#щЕНч╜охдЪreactorч║┐чиЛ" class="header-anchor">#</a> щЕНч╜охдЪReactorч║┐чиЛ</h3> <div class="language-Java extra-class"><pre class="language-java"><code><span class="token class-name">EventLoopGroup</span> eventGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ServerBootstrap</span> serverBootstrap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerBootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
serverBootstrap<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span>eventGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="щЕНч╜оф╕╗ф╗ОreactorхдЪч║┐чиЛ"><a href="#щЕНч╜оф╕╗ф╗ОreactorхдЪч║┐чиЛ" class="header-anchor">#</a> щЕНч╜оф╕╗ф╗ОReactorхдЪч║┐чиЛ</h3> <div class="language-Java extra-class"><pre class="language-java"><code><span class="token class-name">EventLoopGroup</span> bossGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">EventLoopGroup</span> workerGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ServerBootstrap</span> serverBootstrap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerBootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
serverBootstrap<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span>bossGroup<span class="token punctuation">,</span> workerGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="цА╗ч╗У"><a href="#цА╗ч╗У" class="header-anchor">#</a> цА╗ч╗У</h2> <p>цЬмцЦЗцШпф╕АчпЗф┐бцБпщЗПцпФш╛ГхдзчЪДцЦЗчлая╝МчФиф║Ж<code>25</code>х╝ахЫ╛я╝М<code>22336</code>ф╕кхнЧф╗ОхЖЕца╕хжВф╜ХхдДчРЖч╜Сч╗ЬцХ░цНохМЕчЪДцФ╢хПСш┐ЗчиЛх╝АхзЛх▒Хх╝Ая╝МщЪПхРОхПИхЬи<code>хЖЕца╕шзТх║ж</code>ф╗Лч╗Нф║Жч╗Пх╕╕хо╣цШУц╖╖ц╖ЖчЪД<code>щШ╗хбЮф╕ОщЭЮщШ╗хбЮ</code>я╝М<code>хРМцнеф╕Ох╝Вцне</code>чЪДцжВх┐╡уАВф╗еш┐Щф╕кф╜Ьф╕║щУ║хЮля╝МцИСф╗мщАЪш┐Зф╕Аф╕к<code>C10K</code>чЪДщЧощвШя╝Мх╝ХхЗ║ф║Жф║ФчзН<code>IOцибхЮЛ</code>я╝МщЪПхРОхЬи<code>IOхдЪш╖пхдНчФи</code>ф╕нф╗ецКАцЬпц╝Фш┐ЫчЪДх╜вх╝Пф╗Лч╗Нф║Ж<code>select,poll,epoll</code>чЪДхОЯчРЖхТМхоГф╗мч╗╝хРИчЪДхп╣цпФуАВцЬАхРОцИСф╗мф╗Лч╗Нф║Жф╕дчзН<code>IOч║┐чиЛцибхЮЛ</code>ф╗ехПК<code>netty</code>ф╕нчЪД<code>ReactorцибхЮЛ</code>уАВ</p> <p>цДЯш░вхдзхо╢хРмцИСхФахПихИ░ш┐ЩщЗМя╝МхУИхУИя╝МчО░хЬихдзхо╢хПпф╗ецПЙцПЙчЬ╝я╝Мф╝╕ф╕кцЗТшЕ░я╝Мхе╜хе╜ф╝СцБпф╕Аф╕Лф║ЖуАВ</p> <h2 id="хПВшАГш╡ДцЦЩ"><a href="#хПВшАГш╡ДцЦЩ" class="header-anchor">#</a> хПВшАГш╡ДцЦЩ</h2> <ul><li>https://mp.weixin.qq.com/s/zAh1yD5IfwuoYdrZ1tGf5Q</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/echo-lxy/echo-system-design/edit/master/docs/Netty ч│╗ч╗Яшо╛шоб/25.хЫЫуАБц╖▒хЕе Netty ца╕х┐Г/05.чммф╕Ашп╛я╝ЪщАПш┐З Netty чЬЛ IO цибхЮЛ.md" target="_blank" rel="noopener noreferrer">ч╝Цш╛С</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ф╕КцмбцЫ┤цЦ░ф║О:</span> <span class="time">2024/09/19, 08:16:36</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        тЖР
        <a href="/pages/43eb30/" class="prev">ByteBuf ц║РчаБшзгцЮР</a></span> <span class="next"><a href="/pages/440035/">чммф║Мшп╛я╝ЪReactorхЬи Netty ф╕нчЪДхоЮчО░я╝ИхИЫх╗║чпЗя╝Й</a>тЖТ
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:lixinyang2002@163.com" title="хПСщВоф╗╢" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/echo-lxy" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="хРмщЯ│ф╣Р" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="цЬмчлЩф╕╗щвШ">Vdoing</a> 
    | Copyright ┬й 2024-2024
    <span>Xinyang Li | MIT License</span></div> <div class="buttons"><div title="ш┐ФхЫЮщб╢щГи" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="хО╗шпДшо║" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ф╕╗щвШцибх╝П" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          ш╖ЯщЪПч│╗ч╗Я
        </li><li class="iconfont icon-rijianmoshi">
          ц╡ЕшЙ▓цибх╝П
        </li><li class="iconfont icon-yejianmoshi">
          ц╖▒шЙ▓цибх╝П
        </li><li class="iconfont icon-yuedu">
          щШЕшп╗цибх╝П
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.59640afe.js" defer></script><script src="/assets/js/2.933750c6.js" defer></script><script src="/assets/js/51.ef213b56.js" defer></script><script src="/assets/js/7.7eb70372.js" defer></script>
  </body>
</html>
