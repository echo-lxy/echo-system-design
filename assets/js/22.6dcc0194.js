(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{357:function(t,s,v){"use strict";v.r(s);var _=v(4),a=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409141642628.png",alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("我们需要编写一个可扩展以处理高负载的软件吗？")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("负载均衡器中已经实现了最大连接数和服务端点上的最大线程数呢。我们还需要节流吗？")])])]),t._v(" "),s("li",[s("ul",[s("li",[t._v("这种机制是不加区别的，有些操作快，有些操作慢，负载均衡器不了解每个操作的成本，如果我们想对某个操作实现特定的限流，负载均衡器就不好使了")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("我们如何单独控制每个主机呢？")])])]),t._v(" "),s("li",[s("ul",[s("li",[t._v("主机间相互通信！")])])])]),t._v(" "),s("h2",{attrs:{id:"需求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需求"}},[t._v("#")]),t._v(" 需求")]),t._v(" "),s("p",[s("strong",[t._v("功能性")])]),t._v(" "),s("ul",[s("li",[t._v("allowRequest(request)")])]),t._v(" "),s("p",[s("strong",[t._v("非功能性")])]),t._v(" "),s("ul",[s("li",[t._v("低延迟（尽快做出决定）")]),t._v(" "),s("li",[t._v("准确性（尽可能准确）")]),t._v(" "),s("li",[t._v("可扩展（支持集群中任意数量的主机）")]),t._v(" "),s("li",[t._v("高可用")]),t._v(" "),s("li",[t._v("高可靠")])]),t._v(" "),s("h2",{attrs:{id:"前置知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前置知识"}},[t._v("#")]),t._v(" 前置知识")]),t._v(" "),s("ul",[s("li",[t._v("令牌桶算法")]),t._v(" "),s("li",[t._v("速率限制解决方案的面向对象设计")]),t._v(" "),s("li",[t._v("负载均衡器最大连接数，自动扩展")]),t._v(" "),s("li",[t._v("消息广播：全网状网络拓扑、gossip 通信、分布式缓存、协调服务")]),t._v(" "),s("li",[t._v("通信协议：TCP、UDP")]),t._v(" "),s("li",[t._v("嵌入式速率限制器与守护进程")]),t._v(" "),s("li",[t._v("存储桶管理、同步")])]),t._v(" "),s("h2",{attrs:{id:"组件架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件架构"}},[t._v("#")]),t._v(" 组件架构")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409141642790.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"接口和类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口和类"}},[t._v("#")]),t._v(" 接口和类")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409141642812.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"消息广播"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#消息广播"}},[t._v("#")]),t._v(" 消息广播")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409141642594.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"如何集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何集成"}},[t._v("#")]),t._v(" 如何集成")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409141642704.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"答疑解惑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#答疑解惑"}},[t._v("#")]),t._v(" 答疑解惑")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("我的服务非常受欢迎，有数百万用户。这是否意味着内存中存储了数百万个桶？")])])]),t._v(" "),s("li",[s("ul",[s("li",[t._v("可以瞬间增加很多桶，但是当桶没用的时候，可以删除桶")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("有哪些失败的场景？")])])]),t._v(" "),s("li",[s("ul",[s("li",[t._v("守护线程失败")]),t._v(" "),s("li",[t._v("网络分区，无法传播消息，每个主机将允许更多的请求")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("我们是否需要一个自动配置管理服务？")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("我有点担心同步问题。这不是瓶颈吗？")])])]),t._v(" "),s("li",[s("ul",[s("li",[t._v("原则上来说 我们要重视并发安全")]),t._v(" "),s("li",[t._v("但是我们没有必要实现，会对性能造成影响")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("当客户的请求被拒绝时，他们应该做什么？")])])]),t._v(" "),s("li",[s("ul",[s("li",[t._v("重试（指数退避、抖动）")])])])]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://echo798.oss-cn-shenzhen.aliyuncs.com/img/202409141642651.png",alt:"img"}})])])}),[],!1,null,null,null);s.default=a.exports}}]);